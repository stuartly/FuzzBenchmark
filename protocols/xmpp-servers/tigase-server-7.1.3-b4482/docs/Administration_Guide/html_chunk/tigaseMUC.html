<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Tigase MUC Component</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="loadComponent.html" title="Chapter&nbsp;8.&nbsp;Configuring the Tigase Server to Load a Component"><link rel="prev" href="v5xs2sps.html" title="Server to Server Protocol Settings"><link rel="next" href="loadBalancing.html" title="Tigase Load Balancing"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tigase MUC Component</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="v5xs2sps.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;8.&nbsp;Configuring the Tigase Server to Load a Component</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="loadBalancing.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tigaseMUC"></a>Tigase MUC Component</h2></div></div></div><p>Tigase MUC component is included in all Tigase distributions, to enable MUCs have the following lines in your init.properties file:</p><pre class="screen">--comp-name-4 = muc
--comp-class-4 = tigase.muc.MUCComponent</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configuration_options"></a>Configuration Options</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>room-log-directory</strong></span>
Directory to store chat logs</li></ul></div><pre class="screen">muc/room-log-directory=/var/log/muc/</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>message-filter-enabled</strong></span>
To disable filter and allow MUC transfer all subelements in &lt;message/&gt; set:</li></ul></div><pre class="screen">muc/message-filter-enabled[B]=false</pre><p>For example, this allows users to send XHTML stanzas through MUC chatrooms on your server.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>presence-filter-enabled</strong></span>
To disable filter and allow MUC transfer all subelements in &lt;presence/&gt; set:</li></ul></div><pre class="screen">muc/presence-filter-enabled[B]=false</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>search-ghosts-every-minute</strong></span>
To enable pinging occupants every minute</li></ul></div><pre class="screen">muc/search-ghosts-every-minute[B]=true</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>ghostbuster-enabled</strong></span>
To disable active searching of ghosts in MUC Rooms:</li></ul></div><pre class="screen">muc/ghostbuster-enabled[B]=false</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>muc-allow-chat-states</strong></span>
To allow transfer of chat-states in MUC messages:</li></ul></div><pre class="screen">muc/muc-allow-chat-states[B]=true</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>muc-lock-new-room</strong></span>
To turn off default locking newly created rooms:</li></ul></div><pre class="screen">muc/muc-lock-new-room[B]=false</pre><p>By default new room will be locked until owner submit room configuration.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>muc-multi-item-allowed</strong></span>
To disable joining from few resources to sinlge nickname:</li></ul></div><pre class="screen">muc/muc-multi-item-allowed[B]=false</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_history_providers_parameters"></a>History Providers Parameters</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>history-db</strong></span>
Database type. By default the same what is used as User Repository in Server.
Provided types: derby, mysql, memory, pgsql, sqlserver, none.</li></ul></div><pre class="screen">muc/history-db=none</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>history-db-uri</strong></span>
URI for database, if should be used different than default from Tigase Server:</li></ul></div><pre class="screen">muc/history-db-uri=jdbc:derby:/database/tigasedbmuc</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_public_log"></a>Public log</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>muc-logger-class</strong></span>
To set custom class for MUC logger:</li></ul></div><pre class="screen">muc/muc-logger-class=com.example.CustomLogger</pre><p>Class must implment interface tigase.muc.logger.MucLogger.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_modules_3"></a>Modules</h4></div></div></div><p>Each module can be configured to use custom implementation by including it in the init.properties, the defaults are as follows:</p><pre class="programlisting">muc/modules/jabber:iq:version[S]=tigase.component.modules.impl.JabberVersionModule
muc/modules/owner[S]=tigase.muc.modules.RoomConfigurationModule
muc/modules/presences[S]=tigase.muc.modules.PresenceModuleImpl
muc/modules/groupchat[S]=tigase.muc.modules.GroupchatMessageModule
muc/modules/invitations[S]=tigase.muc.modules.MediatedInvitationModule
muc/modules/urn:xmpp:ping[S]=tigase.component.modules.impl.XmppPingModule
muc/modules/unique[S]=tigase.muc.modules.UniqueRoomNameModule
muc/modules/disco[S]=tigase.muc.modules.DiscoveryModule
muc/modules/iqforwarder[S]=tigase.muc.modules.IqStanzaForwarderModule
muc/modules/admin[S]=tigase.muc.modules.ModeratorModule
muc/modules/privatemessages[S]=tigase.muc.modules.PrivateMessageModule
muc/modules/commands[S]=tigase.component.modules.impl.AdHocCommandModule</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mucRoomConfig"></a>Room Configuration options</h4></div></div></div><p>In addition to the default Room configuration options defined in the MUC specification Tigase offers following as well:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Tigase MUC Options</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">tigase#presence_delivery_logic - allows configuring logic determining which presence should be used by occupant in the room while using multiple-resource connections under one nickname, following options are available:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">PREFERE_PRIORITY</li><li class="listitem">PREFERE_LAST</li></ul></div></li><li class="listitem">tigase#presence_filtering - (boolean) when enabled broadcasts presence only to selected affiliation groups</li><li class="listitem"><p class="simpara">tigase#presence_filtered_affiliations - when enabled tigase#presence_filtering is enabled one can select affiliation which should receive presences, following are possible to select from:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">owner</li><li class="listitem">admin</li><li class="listitem">member</li><li class="listitem">none</li><li class="listitem">outcast</li></ul></div></li><li class="listitem">muc#roomconfig_maxusers - Allows configuring of maximum users of room.</li></ul></div></dd><dt><span class="term">Configuring default room configuration in init.properties</span></dt><dd></dd></dl></div><pre class="screen">muc/default_room_config/&lt;option&gt;=&lt;value&gt;</pre><p>for example:</p><pre class="screen">muc/default_room_config/tigase#presence_delivery_logic=PREFERE_LAST</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Configuration per-room</span></dt><dd>Per room configuration is done using IQ stanzas defined in the specification, for example:</dd></dl></div><pre class="programlisting">&lt;iq type="set" to="roomname@muc.domain" id="config1"&gt;
    &lt;query xmlns="http://jabber.org/protocol/muc#owner"&gt;
        &lt;x xmlns="jabber:x:data" type="submit"&gt;
            &lt;field type="boolean" var="tigase#presence_filtering"&gt;
                &lt;value&gt;1&lt;/value&gt;
            &lt;/field&gt;
            &lt;field type="list-multi" var="tigase#presence_filtered_affiliations"&gt;
                &lt;value&gt;owner&lt;/value&gt;
            &lt;/field&gt;
        &lt;/x&gt;
    &lt;/query&gt;
&lt;/iq&gt;</pre></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="v5xs2sps.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="loadComponent.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="loadBalancing.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Server to Server Protocol Settings&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Tigase Load Balancing</td></tr></table></div></body></html>