<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Tigase Advanced Options</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_using_tigase_applies_to_all_tigase_server_versions.html" title="Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions"><link rel="prev" href="licenseserver.html" title="Licensing"><link rel="next" href="tigaseClustering.html" title="Tigase Clustering"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tigase Advanced Options</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="licenseserver.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tigaseClustering.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tigaseAdvancedOptions"></a>Tigase Advanced Options</h2></div></div></div><p>This section is designed to include a number of advanced configuration options available within Tigase, but may not have a relevant section yet to house them.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_enabling_support_for_storing_offline_messages_without_body_content"></a>Enabling Support for storing offline messages without body content</h3></div></div></div><p>Tigase now supports the full implementation or XEP-0334, See <a class="link" href="http://xmpp.org/extensions/xep-0334.html" target="_top">XEP-0334</a> for protocol details.</p><p>This can be customized by setting a list of paths and xmlns to trigger and place storage of offline messages using the following settings in init.properties:</p><pre class="screen">sess-man/plugins-conf/amp/msg-store-offline-paths[s]=/message/received[urn:xmpp:receipts],/message/store-offline</pre><p>This will require the enabling of AMP plugin, so be sure --sm-plugins=+amp is enabled.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="emptyNicks"></a>Enabling Empty Nicknames</h3></div></div></div><p>Tigase can now support users with empty nicknames.  This can be enabled by adding the following code is in init.properties.</p><pre class="screen">sess-man/plugins-conf/jabber\:iq\:roster/empty_name_enabled=true</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="accountRegLimit"></a>Account Registration Limits</h3></div></div></div><p>In order to protect Tigase servers from DOS attacks, a limit on number of account registrations per second has been implemented.  This may be configured by adding the following line in the init.properties file:</p><pre class="screen">sess-man/plugins-conf/jabber\:iq\:register/registrations-per-second=10</pre><p>This setting allows for 10 registrations from a single IP per second.  If the limit is exceeded, a NOT_ALLOWED error will be returned.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="silentIgnore"></a>Enable Silent Ignore on Packets Delivered to Unavailable Resources</h3></div></div></div><p>You can now have Tigase ignore packets delivered to unavailable resources to avoid having a packet bounce around and create unnecessary traffic.  You may set this globally, within standard message handling only, or within the AMP component using the following settings:</p><p>Globally:</p><pre class="screen">sess-man/plugins-conf/silently-ignore-message=true</pre><p>Message Processing Only:</p><pre class="screen">sess-man/plugins-conf/message/silently-ignore-message=true</pre><p>AMP Component:</p><pre class="screen">sess-man/plugins-conf/amp/silently-ignore-message=true</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="errorCounting"></a>Mechanism to count errors within Tigase</h3></div></div></div><p>A new processor within statistics has been added to count the number of errors that Tigase returns. This processor, named error-counter, will count all errors returned by Tigase, however by default the number is always zero if it is not enabled.  It can be found as an MBean object in JMX under ErrorStatistics and contains values for packets with ERROR and grouped by type.
To enable counting of these errors, you must ensure the processor is included in your --sm-plugins:</p><pre class="programlisting">--sm-plugins=error-counter</pre><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_including_stream_errors"></a>Including stream errors</h4></div></div></div><p>Stream ERROR packets are not included in the above counter by default as they are processed separately.
To enable this to be added to the counter, the following line must be in your init.properties file.</p><pre class="programlisting">c2s/processors[s]=stream-error-counter</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="streamResumptiontimeout"></a>Stream resumption default &amp; max-timeout</h4></div></div></div><p>SteamManagementIOProcessor now has a setting that can be used to change the maximum timeout time it will wait for reconnection if a client does not send a time to wait.  Two settings are now available:</p><pre class="programlisting">c2s/processors/urn\:xmpp\:sm\:3/resumption-timeout[I]=90</pre><p>The above setting in init.properties file will change the default timeout period to 90 seconds.</p><pre class="programlisting">c2s/processors/urn\:xmpp\:sm\:3/max-resumption-timeout[I]=900</pre><p>This setting will set the maximum time allowed for stream resumption to 900 seconds.  This can be handy if you expect a number of mobile phones to connect to your server and want to avoid duplicate messages being sent back and forth.</p><p><a name="autoSub"></a>You may setup a server to automatically approve presence subscriptions or roster authorizations for all users.  Say you were hosting bots and wanted to automate the process.  This can be done with the following settings:</p><pre class="programlisting">sess-man/plugins-conf/jabber\:iq\:roster/auto-authorize=true
sess-man/plugins-conf/presence/auto-authorize=true</pre><p>Both of these settings are false by default, and you may use them together or separately.
The following behavior is followed when they are both activated:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Upon sending a subscription request - Both contacts will each others' subscription and be added to each others' roster.  Presence information will immediately be exchanged between both parties.</li><li class="listitem">Upon sending presence with type either unsubscribe or unsubscribed follows the rules defined in RFC regarding processing of these stanzas (i.e. adjusting subscription type of user/contact), but without forwarding those stanzas to the receiving entity to avoid any notifications to the client. However, a roster push is generated to reflect changes to presence in user roster in a seamless manner.</li><li class="listitem">Simply adding an item to the roster (i.e. with &lt;iq/&gt; stanza with correct semantics) will also cause an automatic subscription between the user and the contact in a matter explained above.</li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="licenseserver.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_using_tigase_applies_to_all_tigase_server_versions.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tigaseClustering.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Licensing&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Tigase Clustering</td></tr></table></div></body></html>