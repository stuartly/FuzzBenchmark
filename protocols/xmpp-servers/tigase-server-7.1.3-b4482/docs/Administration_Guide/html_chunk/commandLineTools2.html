<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Command Line Admin Tools</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_using_tigase_applies_to_all_tigase_server_versions.html" title="Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions"><link rel="prev" href="tipsAndTricks.html" title="Tips and Tricks"><link rel="next" href="scriptsupport.html" title="Scripting support in Tigase"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Command Line Admin Tools</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tipsAndTricks.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="scriptsupport.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="commandLineTools2"></a>Command Line Admin Tools</h2></div></div></div><p>Two command line tools have been created to make it easier to manage server configurations and user repositories.</p><p>Configuration tool allows to look at configuration settings and modify parameters. It takes care of proper parameters types and encoding.</p><p>Repository management tool allows to print repository content for all or for selected users. Modify repository data, add, delete users and copy data from one repository to another.</p><p>This guide describe how to efficiently use command line tools which are available for user repository and configuration management.</p><p>These 2 command line tools for managing configuration and repository are:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="https://projects.tigase.org/projects/tigase-server/repository/changes/scripts/config.sh" target="_top">config.sh</a> for configuration management.</li><li class="listitem"><a class="link" href="https://projects.tigase.org/projects/tigase-server/repository/changes/scripts/repo.sh" target="_top">repo.sh</a> for repository management.</li></ol></div><p>Both scripts call class from Tigase package. If you run any of those script with <span class="strong"><strong>-h</strong></span> parameter you will get help screen describing all available parameters.</p><p>I will not concentrate on that help information which is easily accessible anyway. This guide will focus on particular use cases. So it will answer the question: "How to do use the tool?".</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configurationManagement2"></a>Configuration Management Tool</h3></div></div></div><p>The configuration tool allows a user to look at configuration settings and modify parameters.</p><p>First, an answer to the question: "Why use this configuration tool instead of directly, manually editing the config file?"</p><p>There are a couple of reasons why you should NOT manually edit configuration file and use the tool instead to modify settings:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Configuration is kept in XML file which can be easily broken if not edited carefully. The tool takes care of creating valid XML configuration file for you. So you can focus on your task - setting proper parameters for your server.</li><li class="listitem">Configuration values are kept <span class="strong"><strong>UUEncoded</strong></span> in the config file. If you edit file manually you have to take care of proper encoding of special characters. The tool presents parameters to you in decoded form which is easy to read and can accept all settings also in decoded form which is easier for you to write. Then when writing your parameters to configuration file settings are automatically encoded to correct form.</li><li class="listitem">Data in configuration file have <span class="strong"><strong>TYPES</strong></span>. That is some parameters are expected to be <span class="strong"><strong>Strings</strong></span> other are expected to be <span class="strong"><strong>Integers</strong></span>, <span class="strong"><strong>Booleans</strong></span> or arrays keeping data in any of that type. If data type is set incorrectly then Tigase may have problems with reading configuration data. The configuration tool takes care of proper data types in configuration file.</li></ol></div><p>Configuration management tool is a Java class - <a class="link" href="http://server.tigase.org/browser/trunk/src/tigase/conf/Configurator.java" target="_top">tigase.conf.Configurator</a>. To make it easier to use this class there is also shell script available - <a class="link" href="http://server.tigase.org/browser/trunk/scripts/config.sh" target="_top">config.sh</a>.</p><p>First thing you can do is running the script with -h parameter:</p><pre class="programlisting">./scripts/config.sh -h</pre><p>In response you get description of all available parameters:</p><pre class="programlisting">Parameters:
 -h             this help message
 -c file        configuration file
 -key key       node/key for the value to set
 -value value   value to set in configuration file
 -set           set given value for given key
 -add           add given value to the values list for given key
 -print         print content of all configuration settings or of given node/key
 -f             force creation of the new property - dangerous option...
Samples:
 Setting admin account - overwriting any previous value(s)
 $ ./scripts/config.sh -c tigase-config.xml -print -set -key session_1/admins -value admin1@localhost
 Adding next admin account leaving old value(s)
 $ ./scripts/config.sh -c tigase-config.xml -print -add -key session_1/admins -value admin2@localhost

Note: adding -print option is useful always, even with -set or -add
      option as it prints set value afterwards.</pre><p>Let&#8217;s assume configuration for your server is located in <span class="strong"><strong>tigase-config.xml</strong></span> file. So the first thing you need to set when calling the tool is location of the configuration file.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tipsAndTricks.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_using_tigase_applies_to_all_tigase_server_versions.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="scriptsupport.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Tips and Tricks&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Scripting support in Tigase</td></tr></table></div></body></html>