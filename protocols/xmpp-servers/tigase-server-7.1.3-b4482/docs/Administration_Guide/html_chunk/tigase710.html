<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Tigase v7.1.0</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="tigase713.html" title="Chapter&nbsp;1.&nbsp;Tigase v7.1.3"><link rel="prev" href="_amp_plugin_has_had_some_updates.html" title="AMP plugin has had some updates"><link rel="next" href="about.html" title="Chapter&nbsp;2.&nbsp;About Tigase XMPP Server"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tigase v7.1.0</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_amp_plugin_has_had_some_updates.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Tigase v7.1.3</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="about.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tigase710"></a>Tigase v7.1.0</h2></div></div></div><p>Tigase v7.1.1 includes changes made for v7.1.0, so below is included major changes and highlights for v7.1.0 of Tigase.
The lists of specific fixes will not be included in this documentation.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_major_changes"></a>Major Changes</h3></div></div></div><p>Tigase has undergone a few major changes to our code and structure. To continue to use Tigase, a few changes may be needed to be made to your systems.  Please see them below:</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_http_component_renamed"></a>HTTP Component renamed</h4></div></div></div><p>The HTTP component has been renamed, if you still have the old tigase.rest.RestMessageReciever in your init.properties file, please update the component name to:</p><pre class="programlisting">tigase.http.HttpMessageReceiver</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_jdk_v8_required"></a>New JDK v8 required</h4></div></div></div><p>As Oracle has dropped support for version 7 of its Java runtime environment and developer kit, we have moved to version 8 of the JDK.  Furthermore, some new features and fixes for Tigase Server now require the use of JDK v8 or later. Please upgrade your Java packages from <a class="link" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_top">this link</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_changes_to_database_schemas"></a>Changes to Database Schemas</h4></div></div></div><p>Tigase has undergone a number or database schema changes, the current versions being main database schema v7.1 and pubsub schema v3.2.0.  If you are upgrading to v7.1.0 from a previous version of Tigase, it is recommended you visit <a class="link" href="oldVerSchemas.html#v710notice" title="FOR ALL USERS UPGRADING TO v7.1.0 FROM A v7.0.2 INSTALLATION">this section</a> in the documentation to prepare your new installation.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_presence_plugin_split"></a>Presence Plugin Split</h4></div></div></div><p>The plugin handling all presence processing has been split from one plugin (Presence.java) into separate plugins:
- PresenceAbstract.java handles most common presence-related methods, and is also used by the following two plugins.
- PresenceSubscription.java to handle subscription presence processing like for roster updates.
- PresenceState.java to handle initial presences from new logins.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_new_features_components"></a>New Features &amp; Components</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_http_api"></a>New HTTP API</h4></div></div></div><p>Tigase now features an HTTP API that not only allows web client chat, but administrators can change settings, manage users, and even write and run scripts all from the comfort of a browser window.   Furthermore, commands can be passed through this interface using REST to create and run custom scripts and commands.
We plan on expanding on the look and feel of this interface as time goes on, but in the meantime enjoy the real-time XMPP experience now with a user-friendly GUI.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_admin_http_interface"></a>New Admin HTTP interface</h4></div></div></div><p>Tigase now comes with its own build-in web XMPP client!  It can be accessed from <a class="link" href="http://yourhost.com:8080/ui/" target="_top">http://yourhost.com:8080/ui/</a>. For more details, see the Admin UI guide.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_added_support_for_xep_0334"></a>Added support for XEP-0334</h4></div></div></div><p>XEP-0334 is now supported.  See <a class="link" href="offlineMessages.html#nonBodyElements" title="Storing offline messages without body content">this section</a> for details.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_kernel_bean_configurator_has_been_improved"></a>Kernel Bean Configurator has been Improved</h4></div></div></div><p>Added aliases for bean properties to allow for a 'high level' of configuration.
Instead of using</p><pre class="screen">component/bean-name/property=value</pre><p>The following easier to use method will work</p><pre class="screen">component/property=value</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_support_for_xep_0352"></a>Support for XEP-0352</h4></div></div></div><p>Client State Indication is now enabled by default on Tigase XMPP Servers.  Details <a class="link" href="sessMan.html#sessManMobileOpts" title="Mobile Optimizations">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_one_certificate_for_multiple_vhosts"></a>One Certificate for multiple Vhosts</h4></div></div></div><p>Tigase now allows for wildcards in setting server certificate per Vhosts.  See more <a class="link" href="ServerCertificates.html#onecertmultipledomain" title="Using one certificate for multiple domains">in this section</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_maximum_users_setting_for_muc"></a>Maximum users setting for MUC</h4></div></div></div><p>Administrators can now set that maximum number of users allowed on specific MUCs.
See <a class="link" href="tigaseMUC.html#mucRoomConfig" title="Room Configuration options">MUC Room Configuration</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_http_rest_api_support"></a>HTTP Rest API Support</h4></div></div></div><p>Tigase now supports REST commands via HTTP, they can be sent from ad-hoc commands, a web interface, or other REST tools. See <a class="link" href="">documentation</a> for more.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_empty_nicknames"></a>Empty Nicknames</h4></div></div></div><p>Tigase can now support users with empty nicknames.  See <a class="link" href="tigaseAdvancedOptions.html#emptyNicks" title="Enabling Empty Nicknames">this</a> for details.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_offline_message_limits"></a>Offline Message Limits</h4></div></div></div><p>Tigase now has support to enable and change Offline Message Limits as handled by AMP. <a class="link" href="offlineMessages.html#offlineMessageLimits" title="Offline Message Limits">Documentation here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_offline_message_sink"></a>Offline Message Sink</h4></div></div></div><p>A new way to store offline messages has been implemented, it may not replace standard offline messages, but can be used in other ways.
<a class="link" href="PubSubComp.html#offlineMessageSink" title="Offline Message Sink">Documentation here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_adding_components_to_trusted_list"></a>Adding Components to trusted list</h4></div></div></div><p>Components can now be added to trusted list and will be shared with all clustered servers.
<a class="link" href="https://projects.tigase.org/issues/3244" target="_top">#3244</a></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_tigase_mailer_extension_now_included"></a>Tigase Mailer Extension now Included</h4></div></div></div><p>Tigase Mailer extension is now included in distributions of Tigase server. This extension enables the monitor component to deliver E-mails to and from specified e-mail addresses when monitor are triggered.  For more information see <a class="link" href="eventBus.html#monitorMailer" title="Mailer Extension">monitor mailer section</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_eventbus_implemented"></a>EventBus implemented</h4></div></div></div><p>Tigase now has a simple PubSub component called EventBus to report tasks and triggers.  More details are available <a class="link" href="eventBus.html" title="Eventbus">Here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_xep_0191_blocking_command_support_added"></a>XEP-0191 Blocking Command Support added</h4></div></div></div><p>Blocking Command support has been added to Tigase, all functions of <a class="link" href="http://xmpp.org/extensnions/xep-0191/html" target="_top">XEP-0191</a> should be implemented.  See <a class="link" href="_security_2.html#blockingCommand" title="XEP-0191 Support">Admin Guide</a> for details.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_stream_management_now_has_new_settings_available_for_stream_timeout"></a>Stream management now has new settings available for stream timeout</h4></div></div></div><p>Maximum stream timeout and default stream timeout times can now be set in init.properties. Details of these two settings can be found <a class="link" href="tigaseAdvancedOptions.html#streamResumptiontimeout" title="Stream resumption default &amp; max-timeout">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_jvm_default_configuration_updated"></a>JVM Default configuration updated</h4></div></div></div><p>Default tigase.conf file has been updated with the following change in JVM options:</p><pre class="screen">PRODUCTION_HEAP_SETTINGS=" -Xms5G -Xmx5G " # heap memory settings must be adjusted on per deployment-base!
JAVA_OPTIONS="${GC} ${EX} ${ENC} ${DRV} ${JMX_REMOTE_IP} -server ${PRODUCTION_HEAP_SETTINGS} -XX:MaxDirectMemorySize=128m "</pre><p>As the comment says, we recommend adjusting the heap memory settings for your specific installations.
<a class="link" href="https://projects.tigase.org/issues/3567" target="_top">#3567</a></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_java_garbage_collection_settings_have_been_improved"></a>Java Garbage Collection Settings have been improved</h4></div></div></div><p>After significant testing and investigation, we have improved the Java GC settings to keep memory usage from becoming too high on systems.
<a class="link" href="https://projects.tigase.org/issues/3248" target="_top">#3248</a></p><p>For more information about JVM defaults and changes to settings, see <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Administration_Guide/html/#jvm_settings" target="_top">our Documentation</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_rest_api_added_to_obtain_a_jid_login_time"></a>New Rest API added to obtain a JID login time</h4></div></div></div><p><code class="literal">GetUserInfo</code> command has been expanded to obtain user login and logout times in addition to standard information. See <a class="link" href="_tigase_http_api.html#getUserInfoREST" title="New Rest API added to obtain a JID login time">this section</a> for full details.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_init_properties_properties"></a>New init.properties properties</h4></div></div></div><p><code class="literal">--ws-allow-unmasked-frames=false</code>
Allows for unmasked frames to be sent to Tigase server VIA Websocket and not force-close the connection when set to true.  RFC 6455 specifies that all clients must mask frames that it sends to the server over Websocket connections.  If unmasked frames are sent, regardless of any encryption, the server must close the connection.  Some clients however, may not support masking frames, or you may wish to bypass this security measure for development purposes.</p><p><code class="literal">--vhost-disable-dns-check=true</code>
Disables DNS checking for vhosts when changed or edited.
When new vhosts are created, Tigase will automatically check for SRV records and proper DNS settings for the new vhosts to ensure connectivity for outside users, however if these validations fail, you will be unable to save those changes. This setting allows you to bypass that checking.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_connection_watchdog"></a>Connection Watchdog</h4></div></div></div><p>A watchdog property is now available to monitor stale connections and sever them before they become a problem.  More details <a class="link" href="watchdog.html" title="Watchdog">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_web_installer_setup_page_now_has_restricted_access"></a>Web Installer Setup Page now has restricted access</h4></div></div></div><p>The Web Installer Setup Page, available through <a class="link" href="http://yourserver.com/8080/setup/" target="_top">http://yourserver.com/8080/setup/</a> now requires an admin level JID or a user/password combo specified in init.properties.  See the <a class="link" href="webinstall.html" title="Installation Using Web Installer">Web Installer</a> section for default settings.  See <a class="link" href="_tigase_http_api.html#httpCompProp" title="Component Properties">Component Properties</a> section for details on the new property.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_offline_message_receipts_storage_now_configurable"></a>Offline Message Receipts Storage now Configurable</h4></div></div></div><p>Admins may now configure Offline Message Receipts Storage to specify filters and controls as to what they want stored in offline messages. See <a class="link" href="offlineMessages.html#offlineFiltering" title="Filtering of offline storage">more details here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_account_registration_limits"></a>Account Registration Limits</h4></div></div></div><p>In order to protect Tigase servers from DOS attacks, a limit on number of account registrations per second has been implemented.  See <a class="link" href="tigaseAdvancedOptions.html#accountRegLimit" title="Account Registration Limits">this link</a> for configuration settings.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_enable_silent_ignore_on_packets_delivered_to_unavailable_resources"></a>Enable Silent Ignore on Packets Delivered to Unavailable Resources</h4></div></div></div><p>You can now have Tigase ignore packets delivered to unavailable resources to avoid having a packet bounce around and create unnecessary traffic. Learn how <a class="link" href="tigaseAdvancedOptions.html#silentIgnore" title="Enable Silent Ignore on Packets Delivered to Unavailable Resources">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_cluster_connections_improved"></a>Cluster Connections Improved</h4></div></div></div><p>Cluster commands now operate at CLUSTER priority, giving the packets higher status than HIGH which otherwise has caused issues during massive disconnects.
New Configuration options come with this change.  The first being able to change the number of connections for CLUSTER packets using the following init.property setting:</p><pre class="screen">cl-comp/cluster-sys-connections-per-node[I]=2</pre><p>Also a new class which implements the new connection selection interface, but uses the old mechanism where any connection can send any command.</p><pre class="screen">cl-comp/connection-selector=tigase.cluster.ClusterConnectionSelectorOld</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_cluster_connections_testing_implemented"></a>Cluster Connections Testing Implemented</h4></div></div></div><p>Watchdog has now been added to test cluster connections by default.  Watchdog sends an XMPP ping to all cluster connections every 30 seconds and checks to see if a ping response has been received in the last 3 minutes. If not, the cluster connection will be dropped automatically. Global watchdog settings will not impact cluster testing feature.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_cluster_map_implemented"></a>Cluster Map implemented</h4></div></div></div><p>Tigase can now generate cluster maps through a new API.  See the <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Development_Guide/html/#clusterMapInterface" target="_top">development guide</a> for a description of the API.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_licensing_procedures"></a>New Licensing Procedures</h4></div></div></div><p>With the release of Tigase XMPP server v7.1.0, our licensing procedures have changed.  For more information about how to obtain, retain, and install your license, please see <a class="link" href="licenseserver.html" title="Licensing">this section</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_message_archive_expanded_to_include_non_body_elements"></a>Message Archive expanded to include non-body elements</h4></div></div></div><p>Message Archive can now be configured to store messages that may not have body element, this option is explained in <a class="link" href="messageArchiving.html#nonBodyStore" title="Saving Options">this section</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_ability_to_purge_data_from_unified_archive"></a>New Ability to Purge Data from Unified Archive</h4></div></div></div><p>Data from Unified Archive or Message Archive can be automatically or manually purged depending on age or expired status.  Information on configuring this is available <a class="link" href="messageArchiving.html#maPurging" title="Purging Information from Message Archive">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_server_statistics_expanded"></a>Server Statistics Expanded</h4></div></div></div><p>Server Statistics for Tigase XMPP Server have been expanded, and now will print at the close of a server session, or may be obtained in the normal way.  Note that some statistics have changed since previous versions, and may have different formatting.  See <a class="link" href="serverMonitoring.html#statsticsDescription" title="Statistics description">the Statistics Description</a> section of the Administration guide for all current server statistics.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_force_redirection"></a>Force Redirection</h4></div></div></div><p>It&#8217;s possible now to redirect connections on one port to be forced to connect to another port using the <code class="literal">force-redirect-to</code> setting.  <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Administration_Guide/html/#_enforcing_redirection" target="_top">Details here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_dual_ip_installtions"></a>Dual IP installtions</h4></div></div></div><p>Tigase now has a Dual IP setup which can now use a separate internal and external IP and use a DNS resolver for the connection redirection.  Setup instructions are <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Administration_Guide/html/#_configuring_hostnames" target="_top">Located here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_error_counting"></a>Error counting</h4></div></div></div><p>It is now possible to conduct error counting and collect it from statistics.  This feature is explained in more detail <a class="link" href="tigaseAdvancedOptions.html#errorCounting" title="Mechanism to count errors within Tigase">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_database_disconnections_counter"></a>New Database Disconnections Counter</h4></div></div></div><p>3 new statistics were added to <code class="literal">basic-conf</code> to help monitor database connection stability, and how often the XMPP Server needs to reconnect to the database. The list of new statistics are listed <a class="link" href="serverMonitoring.html#repo-factoryStatistics" title="repo-factory">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_known_cluster_statistic"></a>New Known Cluster Statistic</h4></div></div></div><p>A new statistic has been added to cl-comp displaying the number of connected Cluster Nodes if there are more than one. Displayed as an INFO level statistic.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_documentation_structure"></a>New Documentation Structure</h4></div></div></div><p>There has been a lot of changes and fixes to our documentation over the last few months. If you have links to any of our documentation, please update them as the filenames may have changed.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_full_xml_of_last_available_presence_may_be_saved_to_repository"></a>Full XML of last available presence may be saved to repository</h4></div></div></div><p>A more detailed last available presence can now be made from some configuration changes, along with a timestamp before the entire presence stanza is saved to the repository.  More information is available <a class="link" href="PubSubComp.html#storeFullXMLLastPresence" title="Store Full XML of Last Presence">here</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_setting_available_to_enable_automatic_subscriptions"></a>Setting available to enable automatic subscriptions</h4></div></div></div><p>Tigase supports enabling automatic presence subscriptions and roster authorizations.  For more information on these settings, check the <a class="link" href="tigaseAdvancedOptions.html#autoSub">Automatic Subscriptions</a> section.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_stacktrace_on_shutdown"></a>Stacktrace on Shutdown</h4></div></div></div><p>Tigase will now dump the stacktrace upon shutdown by default.  For more information, check <a class="link" href="shuttingDown.html#shutDownStackTrace" title="Shutdown StackTrace Dump">this description</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_new_logic_handling_re_delivery_of_packets"></a>New logic handling re-delivery of packets</h4></div></div></div><p>Previously, Tigase would retry delivering command packets that failed to send after a brief delay of 60 seconds.  This new method can provide relief in situations where command packet queues can get full.
The new logic works like this:
The delay for retries, after the first delay of 60 seconds will increase by a factor of 1.5, so the 2nd retry will then be 90 seconds, and then 135 and so on, until the retry limit has been reached (default is 15).
Included in this is a new setting for setting the retry count, available <a class="link" href="">here</a>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_amp_plugin_has_had_some_updates.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="tigase713.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="about.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">AMP plugin has had some updates&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;2.&nbsp;About Tigase XMPP Server</td></tr></table></div></body></html>