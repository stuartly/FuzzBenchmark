<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Access Control Lists in Tigase</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_security_2.html" title="Chapter&nbsp;6.&nbsp;Security"><link rel="prev" href="tigase41packetFiltering.html" title="Packet Filtering"><link rel="next" href="databasemgnt.html" title="Chapter&nbsp;7.&nbsp;Database Management"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Access Control Lists in Tigase</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tigase41packetFiltering.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Security</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="databasemgnt.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="accessControlList"></a>Access Control Lists in Tigase</h2></div></div></div><p>Tigase offers support for <span class="strong"><strong>Access Control List (ACL)</strong></span> to allow for fine grained access to administration commands on the server.</p><p>By default, all administration commands are only accessible (visible through service discovery and can be executed) by the service administrators.  Service administrators are existing accounts with JIDs (<span class="strong"><strong>BareJIDs</strong></span>) listed in the init.properties file under --admins.</p><p>Additionally, other XMPP users and entities can be assigned permissions to execute a command or commands using Tigase&#8217;s ACL capabilities.</p><p>The following is a list of possible ACL modifiers for administrator command accessibility:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>ALL</strong></span> - Everybody can execute the command, even users from different federated servers.</li><li class="listitem"><span class="strong"><strong>ADMIN</strong></span> - Local server administrators can execute the command, this is a default setting if no ACL is set for a command.</li><li class="listitem"><span class="strong"><strong>LOCAL</strong></span> - All users with accounts on the local server can execute the command. Users from other, federated servers will not be able to execute the command.</li><li class="listitem"><span class="strong"><strong>DOMAIN</strong></span> - Only users with accounts on the selected domain will be able to execute the command.  It may be useful to setup a domain specifically for admin accounts, and automatically all users within that domain would be able to run the command.</li><li class="listitem"><span class="strong"><strong>JID</strong></span> - Comma separated list of JIDs of users who can execute the command.</li></ul></div><p>In any case, regardless of ACL settings, any command can be executed and accessed by the designated service wide administrators, that is accounts listed as admins in the init.properties file.</p><p>Multiple ACL modifiers can be combined and applied for any command. This may not always makes sense. For example ALL supersedes all other settings, so it does not make sense to combine it with any other modifier. However, most others can be combined with JID to broaden access to specific accounts.</p><p>On Tigase server the Access Control List is checked for the first matching modifier. Therefore if you combine ALL with any other modifier, anybody from a local or remote service will always be able to execute the command, no matter what other modifiers are added.</p><p>Please note, the ACL lists work on the command framework level. Access is verified before the command is actually executed. There might be additional access restrictions within a command itself. In many cases, even if all local users are permitted to execute a command (LOCAL modifier), some commands allow only to be executed by a domain owner or a domain administrator (and of course by the service-wide administrators as well). All the commands related to a user management such as adding a new user, removing a user, password changes, etc&#8230; belong to this category.
When conducting domain (vhost) management, creation/registration of a new domain can be done by any local user (if LOCAL ACL modifier is set) but then all subsequent domain management tasks such as removing the vhost, updating its configuration, setting SSL certificate can be done by the domain owner or administrator only.</p><p>The ACL list is set for a specific Tigase component and a specific command. Therefore the configuration property must specify all the details. So the general format for configuring ACL for a command is this:</p><p>comp-id/command/command-id=ACL_modifier,ACL_modifier,ACL_modifier</p><p>The breakdown is as such:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>comp-id</strong></span> is the Tigase server component ID such as: sess-man, vhost-man, c2s, etc..</li><li class="listitem"><span class="strong"><strong>command</strong></span> is a static text which indicates that the property is for component&#8217;s command settings.</li><li class="listitem"><span class="strong"><strong>command-id</strong></span> is a command ID for which we set the ACL such as query-dns, http://jabber.org/protocol/admin#add-user, user-roster-management, etc&#8230;</li></ul></div><p>Here are a few examples:</p><p><span class="emphasis"><em>Allowing local users to create and manage their own domains</em></span></p><pre class="programlisting">vhost-man/command/comp-repo-item-add=LOCAL
vhost-man/command/comp-repo-item-remove=LOCAL
vhost-man/command/comp-repo-item-update=LOCAL
vhost-man/command/ssl-certificate-add=LOCAL</pre><p>In fact all the commands except item-add can be executed by the domain owner or administrator.</p><p><span class="emphasis"><em>Allowing local users to execute user management commands:</em></span></p><pre class="programlisting">sess-man/command/http\://jabber.org/protocol/admin#add-user=LOCAL
sess-man/command/http\://jabber.org/protocol/admin#change-user-password=LOCAL
sess-man/command/http\://jabber.org/protocol/admin#delete-user=LOCAL
sess-man/command/http\://jabber.org/protocol/admin#get-online-users-list=LOCAL
sess-man/command/http\://jabber.org/protocol/admin#get-registered-user-list=LOCAL
sess-man/command/http\://jabber.org/protocol/admin#user-stats=LOCAL
sess-man/command/http\://jabber.org/protocol/admin#get-online-users-list=LOCAL</pre><p>As in the previous example, the commands will by executed only by local users who are the specific domain administrators.</p><p><span class="emphasis"><em>Allowing users from a specific domain to execute query-dns command and some other users for given JIDs from other domains:</em></span></p><pre class="screen">vhost-man/command/query-dns=DOMAIN:tigase.com,admin@tigase.org,frank@example.com</pre><p>To be able to set a correct ACL property you need to know component names and command IDs. Component IDs can be found in the service discovery information on running server or in the server logs during startup. A command ID can be found in the command script source code. Each script contains a list of metadata at the very beginning of it&#8217;s code. One of them is AS:CommandId which is what you have to use for the ACL setting.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tigase41packetFiltering.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_security_2.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="databasemgnt.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Packet Filtering&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Database Management</td></tr></table></div></body></html>