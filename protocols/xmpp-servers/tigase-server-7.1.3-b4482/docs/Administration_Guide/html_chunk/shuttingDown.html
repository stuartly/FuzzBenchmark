<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Shutting Down Tigase</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="QuickStart.html" title="Chapter&nbsp;3.&nbsp;Quick Start Guide"><link rel="prev" href="tigaseScriptStart.html" title="Tigase Script Selection"><link rel="next" href="TSBupdates.html" title="Chapter&nbsp;4.&nbsp;Tigase Server Binary Updates"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Shutting Down Tigase</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tigaseScriptStart.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Quick Start Guide</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="TSBupdates.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="shuttingDown"></a>Shutting Down Tigase</h2></div></div></div><p>Although Tigase XMPP Server can be terminated by ending the process, it is preferred and recommended to use it&#8217;s own shutdown scripts instead.  Not only does this allow for a proper purge of Tigase form the system, but allows for all shutdown functions to operate, such as ammending logs and completing statistics.
To trigger a shutdown of Tigase server, the following command can be used from the tigase directory:</p><pre class="programlisting">./scripts/tigase.sh stop</pre><p>You may specify the config file if you want, but it will make no differences</p><p>This will:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Begin shutdown thread</li><li class="listitem">Stop accepting new connections</li><li class="listitem">Close all current connections</li><li class="listitem">Collect runtime statistics</li><li class="listitem">Write statistics to log</li><li class="listitem">Dump full stacktrace to a file</li><li class="listitem">Run GC and clear from memory</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="shutDownStats"></a>Shutdown statistics</h3></div></div></div><p>Upon shutdown, statistics for the server&#8217;s runtime will be appended to the log file.  For a description of the statsitics and what they mean, refer to the <a class="link" href="serverMonitoring.html#statsticsDescription" title="Statistics description">Statistics Description</a> portion of the documentation.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="shutDownStackTrace"></a>Shutdown StackTrace Dump</h3></div></div></div><p>To aid with troubleshooting purposes, the full stacktrace will be dumped to a seperate file located at $serverdir/logs/threads-dump.log.#
Stacktrace logs will follow the same log file numbering scheme described in <a class="link" href="_using_tigase_applies_to_all_tigase_server_versions.html#logs" title="Tigase Log Guide">Log file description</a>.</p><p>This feature is enabled by default, however you may disable this by adding the following to your init.properties file:</p><pre class="programlisting">--shutdown-thread-dump=false</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tigaseScriptStart.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="QuickStart.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="TSBupdates.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Tigase Script Selection&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Tigase Server Binary Updates</td></tr></table></div></body></html>