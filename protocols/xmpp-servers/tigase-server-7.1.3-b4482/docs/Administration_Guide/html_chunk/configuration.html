<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;5.&nbsp;Configuration</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="index.html" title="Tigase Administration Guide"><link rel="prev" href="TSBupdates.html" title="Chapter&nbsp;4.&nbsp;Tigase Server Binary Updates"><link rel="next" href="manualconfig.html" title="Startup File for tigase.sh - tigase.conf"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;5.&nbsp;Configuration</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="TSBupdates.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="manualconfig.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="configuration"></a>Chapter&nbsp;5.&nbsp;Configuration</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="configuration.html#initPropertiesGuide">Tigase XMPP Server init.properties Configuration</a></span></dt><dt><span class="section"><a href="manualconfig.html">Startup File for tigase.sh - tigase.conf</a></span></dt><dt><span class="section"><a href="linuxhighload.html">Linux Settings for High Load Systems</a></span></dt><dd><dl><dt><span class="section"><a href="linuxhighload.html#_fs_file_max">fs.file-max</a></span></dt><dt><span class="section"><a href="linuxhighload.html#_net_ipv4_ip_local_port_range">net.ipv4.ip_local_port_range</a></span></dt><dt><span class="section"><a href="linuxhighload.html#_tcp_keepalive">TCP_keepalive</a></span></dt><dt><span class="section"><a href="linuxhighload.html#__etc_sysctl_conf">/etc/sysctl.conf</a></span></dt><dt><span class="section"><a href="linuxhighload.html#_nofile">nofile</a></span></dt><dt><span class="section"><a href="linuxhighload.html#_su_and_init_script">su and init script</a></span></dt></dl></dd><dt><span class="section"><a href="confChanges5x.html">Configuration Storage Options in Tigase</a></span></dt><dd><dl><dt><span class="section"><a href="confChanges5x.html#_default_behavior">Default Behavior</a></span></dt><dt><span class="section"><a href="confChanges5x.html#_storing_configuration_in_sql_database">Storing Configuration in SQL Database</a></span></dt><dt><span class="section"><a href="confChanges5x.html#_reverting_to_the_old_behavior">Reverting To the Old Behavior</a></span></dt><dt><span class="section"><a href="confChanges5x.html#_going_further">Going Further</a></span></dt><dt><span class="section"><a href="confChanges5x.html#_message_router_implementation_is_configurable_too">Message Router Implementation is Configurable Too</a></span></dt></dl></dd><dt><span class="section"><a href="jvm_settings.html">JVM settings and recommendations</a></span></dt><dd><dl><dt><span class="section"><a href="jvm_settings.html#_heap_sizing">Heap Sizing</a></span></dt><dt><span class="section"><a href="jvm_settings.html#_gc_settings">GC settings</a></span></dt><dt><span class="section"><a href="jvm_settings.html#_what_to_use_with_machine_x_y_z">What to use with Machine x, y, z?</a></span></dt><dt><span class="section"><a href="jvm_settings.html#_additional_resources">Additional resources</a></span></dt></dl></dd><dt><span class="section"><a href="sessMan.html">Session Manager</a></span></dt><dd><dl><dt><span class="section"><a href="sessMan.html#sessManMobileOpts">Mobile Optimizations</a></span></dt><dt><span class="section"><a href="sessMan.html#_thread_pool_counts">Thread Pool Counts</a></span></dt></dl></dd></dl></div><p>When the user tries to setup the client for the first time he comes across 2 configuration files: <span class="strong"><strong>tigase.conf</strong></span> and <span class="strong"><strong>init.properties</strong></span> in the /etc folder. Here is a brief explanation what all those files are about and in other sections you can learn all the details needed to configure the server.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="configuration.html#initPropertiesGuide" title="Tigase XMPP Server init.properties Configuration">init.properties</a> file is a simple text file with server parameters in form: <span class="strong"><strong>key</strong></span> = <span class="strong"><strong>value</strong></span>. When the XML configuration file is missing the Tigase server reads <span class="strong"><strong>init.properties</strong></span> file and uses parameters found there as defaults for generation of the XML file. Therefore if you change the <span class="strong"><strong>init.properties</strong></span> file you normally have to stop the server, remove the XML file and start the server again. All the settings from the <span class="strong"><strong>init.properties</strong></span> are read and applied to the XML configuration. The properties file is easy to read and very safe to modify. At the moment this is the recommended way change the server configuration.</li><li class="listitem"><a class="link" href="manualconfig.html" title="Startup File for tigase.sh - tigase.conf">tigase.conf</a> is the Tigase server startup configuration. It is actually not used by the server itself. It rather contains operating system settings and environment parameters to correctly run the <a class="link" href="http://java.sun.com/" target="_top">Java Virtual Machine</a>. It is only useful on the unix-like systems with Bash shell. If you run the server on MS Windows systems <span class="strong"><strong>tigase.bat</strong></span> and <span class="strong"><strong>wrapper.conf</strong></span> files are used instead. The <span class="strong"><strong>tigase.conf</strong></span> file is read and loaded by the <span class="strong"><strong>scripts/tigase.sh</strong></span> shell script which also scans the operating system environment for Java VM and other tools needed.</li></ol></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="initPropertiesGuide"></a>Tigase XMPP Server init.properties Configuration</h2></div></div></div><p>init.properties is a slightly extended version of the Java properties file with (key, value) pairs.</p><p>Comment lines will have as it&#8217;s first non-white space ASCII character either '#' or '!'.</p><p>The key starts with first non-white space ASCII character and ends on either first white space ASCII character or either of '=' or ':'. Therefore if your key contains any of '=', ':' or white space characters you have to escape them with backslash \'\': \: or \=.</p><p>All examples below specify 'vhosts' as a key and 'test-a, test-b, test-c' as a value:</p><pre class="programlisting">vhosts=test-a, test-b, test-c
vhosts : test-a, test-b, test-c
    vhosts     =     test-a, test-b, test-c</pre><p>Possible types are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>[S]</strong></span> (or nothing) - Characters string: 'abcdef'</li><li class="listitem"><span class="strong"><strong>[s]</strong></span> - String array: 'abcdef, ghaijk, lmnopq'</li><li class="listitem"><span class="strong"><strong>[B]</strong></span> - Boolean: 'true' or 'false'</li><li class="listitem"><span class="strong"><strong>[b]</strong></span> - Boolean array: 'true, true, false'</li><li class="listitem"><span class="strong"><strong>[L]</strong></span> - Long number: 1234567890</li><li class="listitem"><span class="strong"><strong>[l]</strong></span> - Long array: '12334, 45435, 45645'</li><li class="listitem"><span class="strong"><strong>[I]</strong></span> - Integer number: 123456</li><li class="listitem"><span class="strong"><strong>[i]</strong></span> - Integer array: '123, 456, 678'</li></ul></div><p>There are lots of parameters which have broader meaning than just one property. Some of them affect many configuration settings or can generate whole sections in the XML file. Most of them starts with \'--' double hyphen. Please note, each property put in the init.properties file starting with \'--' becomes a JVM system property (without \'--' at the beginning).</p><p>Reference the property guide for a description of properties.</p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#admins" target="_top">--admins</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#authDb" target="_top">--auth-db</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#authDbUri" target="_top">--auth-db-uri</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#authDomainRepoPool" target="_top">--auth-domain-repo-pool</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#authRepoPool" target="_top">--auth-repo-pool</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#authRepoPoolSize" target="_top">--auth-repo-pool-size</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#bindExtHostnames" target="_top">--bind-ext-hostnames</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#boshCloseConnection" target="_top">--bosh-close-connection</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#boshExtraHeadersFile" target="_top">--bosh-extra-headers-file</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#clConnRepoClass" target="_top">--cl-conn-repo-class</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#clientAccessPolicyFile" target="_top">--client-access-policy-file</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#clusterConnectAll" target="_top">--cluster-connect-all</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#clusterMode" target="_top">--cluster-mode</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#clusterNodes" target="_top">--cluster-nodes</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#cmHtTrafficThrottling" target="_top">--cm-ht-traffic-throttling</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#cmSeeOtherHost" target="_top">--cm-see-other-host</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#cmTrafficThrottling" target="_top">--cm-traffic-throttling</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#cmpnamePorts" target="_top">--cmpname-ports</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#compClass" target="_top">--comp-class</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#compName" target="_top">--comp-name</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#crossDomainPolicyFile" target="_top">--cross-domain-policy-file</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#dataRepoPoolSize" target="_top">--data-repo-pool-size</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#debug" target="_top">--debug</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#debugPackages" target="_top">--debug-packages</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#domainFilterPolicy" target="_top">--domain-filter-policy</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#elementsNumberLimit" target="_top">--elements-number-limit</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#extComp" target="_top">--ext-comp</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#extcompRepoClass" target="_top">--extcomp-repo-class</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#external" target="_top">--external</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#hardenedMode" target="_top">--hardened-mode</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#maxQueueSize" target="_top">--max-queue-size</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#monitoring" target="_top">--monitoring</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#netBuffHighThroughput" target="_top">--net-buff-high-throughput</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#netBuffStandard" target="_top">--net-buff-standard</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#newConnectionsThrottling" target="_top">--new-connections-throttling</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#nonpriorityQueue" target="_top">--nonpriority-queue</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#queueImplementation" target="_top">--queue-implementation</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#rosterImplementation" target="_top">--roster-implementation</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#s2sEjabberdBugWorkaroundActive" target="_top">--s2s-ejabberd-bug-workaround-active</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#s2sSecret" target="_top">--s2s-secret</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#s2sSkipTlsHostnames" target="_top">--s2s-skip-tls-hostnames</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#scriptDir" target="_top">--script-dir</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#smClusterStrategyClass" target="_top">--sm-cluster-strategy-class</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#smPlugins" target="_top">--sm-plugins</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#smThreadsPool" target="_top">--sm-threads-pool</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#sslCertsLocation" target="_top">--ssl-certs-location</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#sslContainerClass" target="_top">--ssl-container-class</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#sslDefCertDomain" target="_top">--ssl-def-cert-domain</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#statsHistory" target="_top">--stats-history</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#stringprepProcessor" target="_top">--stringprep-processor</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#test" target="_top">--test</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#tigaseConfigRepoClass" target="_top">--tigase-config-repo-class</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#tigaseConfigRepoUri" target="_top">--tigase-config-repo-uri</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#tlsJdkNssBugWorkaroundActive" target="_top">--tls-jdk-nss-bug-workaround-active</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#trusted" target="_top">--trusted</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#userDb" target="_top">--user-db</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#userDbUri" target="_top">--user-db-uri</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#userDomainRepoPool" target="_top">--user-domain-repo-pool</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#userRepoPool" target="_top">--user-repo-pool</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#userRepoPoolSize" target="_top">--user-repo-pool-size</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#vhostAnonymousEnabled" target="_top">--vhost-anonymous-enabled</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#vhostMaxUsers" target="_top">--vhost-max-users</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#vhostMessageForwardJid" target="_top">--vhost-message-forward-jid</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#vhostPresenceForwardJid" target="_top">--vhost-presence-forward-jid</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#vhostRegisterEnabled" target="_top">--vhost-register-enabled</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#vhostTlsRequired" target="_top">--vhost-tls-required</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#virtHosts" target="_top">--virt-hosts</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#watchdogDelay" target="_top">--watchdog_delay</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#watchdogPingType" target="_top">--watchdog_ping_type</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#watchdogTimeout" target="_top">--watchdog_timeout</a></p><p><span class="strong"><strong>Property name:</strong></span> <a class="link" href="http://docs.tigase.org/tigase-server/snapshot/Properties_Guide/html/#configType" target="_top">config-type</a></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="TSBupdates.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="manualconfig.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;4.&nbsp;Tigase Server Binary Updates&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Startup File for tigase.sh - tigase.conf</td></tr></table></div></body></html>