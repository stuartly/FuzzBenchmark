<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Importing Existing Data</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="databasemgnt.html" title="Chapter&nbsp;7.&nbsp;Database Management"><link rel="prev" href="dbImportingData.html" title="Importing User Data"><link rel="next" href="oldVerSchemas.html" title="Schema Updates"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Importing Existing Data</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dbImportingData.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;7.&nbsp;Database Management</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="oldVerSchemas.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="existingData"></a>Importing Existing Data</h2></div></div></div><p>Information about importing user data from other databases.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="connectingTigaseToMysql"></a>Connecting the Tigase Server to MySQL Database</h3></div></div></div><p>Please before continuing reading of this manual have a look at the <a class="link" href="databasePreperation.html#prepareMysql" title="Prepare the MySQL Database for the Tigase Server">initial MySQL database setup</a>. It will help you with database preparation for connecting with Tigase server.</p><p>The easiest way to setup Tigase server for connecting with MySQL database is to use the <a class="link" href="tigase3xconfiguration.html" title="Configuration Wizards">configuration wizards</a> (configuration generators) which release you from manually editing the XML configuration file and allow you quickly regenerate the XML configuration file in case of problems.</p><p>The article describes an older way for using configuration generators which is a bit more difficult and doesn&#8217;t work on Windows systems. The guide below describes a new way to use them which is simpler and can be applied to Windows systems as well. It is using the init.properties file where you can put all your initial configuration parameters.</p><p>This guide describes MySQL database connection parameters.</p><p>This guide is actually very short as there are example configuration files which can be used and customized for your environment.</p><p>Unfortunately these files are not included yet in the server version 3.x binary release and you have to download them from the SVN repository using following links:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="https://projects.tigase.org/projects/tigase-server/repository/changes/etc/tigase-mysql.conf" target="_top">tigase-mysql.conf</a> - the Tigase server startup file. The only difference from the default one is that it points to the file described below to load initial parameters.</li><li class="listitem"><p class="simpara"><a class="link" href="https://projects.tigase.org/projects/tigase-server/repository/changes/etc/init-mysql.properties" target="_top">init-mysql.properties</a> - the file contains a few initial parameters which can/should be adjusted to your environment. Here is a content of the file with each line described:</p><pre class="programlisting"># Load standard set of the server components.
# Look at the http://www.tigase.org/configuration-wizards
# document for other possible values. Normally you don't
# need to change this line.
config-type=--gen-config-def
# List of administrator accounts, please replace them with
# administrator accounts in your installation
--admins=admin@tigase.org,admin@test-d
# The line says that the database used by the Tigase server is 'mysql'
# Look at the configuration wizards article for different options
# You can also put here a Java class name if you have a custom
# implementation for a database connector.
--user-db=mysql
# The line contains the database connection string. This is database
# specific string and for each kind of database it may look differently.
# Below string is for MySQL database. Please modify it for your system.
# MySQL connector requires connection string in the following format:
# jdbc:mysql://[hostname]/[database name]?user=[user name]&amp;password=[user password]
--user-db-uri=jdbc:mysql://localhost/tigasedb?user=tigase_user&amp;password=mypass
# Virtual domains for your server installation, comma separated list of vhosts
--virt-hosts=tigase.org,test-d,localhost
# Select what packages you want to have logging switched for
# The below setting is recommended for the initail setup and it is required
# when asking for help with setting the server up
--debug=server</pre></li></ol></div><p>Download both files and put them to your etc/ directory.</p><p>Edit the init-mysql.properties for your environment.</p><p>Remove the XML configuration file.</p><p>Start the server using following command:</p><pre class="programlisting">./bin/tigase.sh start etc/tigase-mysql.conf</pre><p><span class="emphasis"><em>Ask more questions if you got stuck or need any help with this.</em></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="integrateWithDrupal"></a>Integrating Tigase Server with Drupal</h3></div></div></div><p>Tigase supports integration with Drupal on many levels. At the moment this guide can work with Drupal version 4.x and 5.x. They may also work with Drupal 6.x but this version hasn&#8217;t been tested.</p><p>First of all, Tigase can authenticate users against a Drupal database which means you have the same user account for both Drupal website and the XMPP server. Moreover in such a configuration all account management is done via Drupal web interface like account creation, password change update user details and so on. Administrator can temporarily disable user account and this is followed by Tigase server too.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_connecting_to_drupal_database"></a>Connecting to Drupal Database</h4></div></div></div><p>The best way to setup Tigase with Drupal database is via configuration wizards that is init.properties file where you can put initial setting for Tigase configuration.</p><p>If you look in etc/ directory of your Tigase installation you should find a few files there. The one we want to base our configuration on is: init-mysql.properties. In some older packages the file might be missing, then you can download it from the <a class="link" href="https://projects.tigase.org/projects/tigase-server/repository/changes/etc/init-mysql.properties" target="_top">SVN repository</a>.</p><p>If you look inside the file and strip all the comments you would see following lines:</p><pre class="programlisting">config-type=--gen-config-def
--admins=admin@tigase.org,admin@tigase.net
--user-db=mysql
--user-db-uri=jdbc:mysql://localhost/tigasedb?user=tigase_user&amp;password=mypass
--virt-hosts=tigase.org,tigase.net
--debug=server</pre><p>All you need to connect to Drupal database are 2 following lines:</p><pre class="programlisting">--auth-db=drupal
--auth-db-uri=jdbc:mysql://localhost/drupal?user=drupalusr&amp;password=drupalpass</pre><p>Let&#8217;s combine it in a single file called etc/init-drupal.properties:</p><pre class="programlisting">config-type=--gen-config-def
--admins=admin@tigase.org,admin@tigase.net
--auth-db=drupal
--auth-db-uri=jdbc:mysql://localhost/drupal?user=drupalusr&amp;password=drupalpass
--user-db=mysql
--user-db-uri=jdbc:mysql://localhost/tigasedb?user=tigase_user&amp;password=mypass
--virt-hosts=tigase.org,tigase.net
--debug=server</pre><p>In theory you can load Tigase database schema to Drupal database and then both db-uris would have the same database connection string. More details about setting up and connecting to MySQL database can be found in the <a class="link" href="databasePreperation.html#prepareMysql" title="Prepare the MySQL Database for the Tigase Server">MySQL guide</a>.</p><p>You need also to edit etc/tigase.conf file to point to your newly created properties file. The last line which looks like this:</p><pre class="programlisting">TIGASE_OPTIONS=" --property-file etc/init.properties "</pre><p>should be changed to following:</p><pre class="programlisting">TIGASE_OPTIONS=" --property-file etc/init-drupal.properties "</pre><p>Make sure you have Java-6 installed and JAVA_HOME is set to the correct location. If JAVA_HOME is not set you can add following line to etc/tigase.conf file:</p><pre class="programlisting">JAVA_HOME="/your/java-6-location"</pre><p>The best way to check whether the variable is set correctly is with command:</p><pre class="programlisting">$ ls -l $JAVA_HOME/bin/java</pre><p>should list you the file without error.</p><p>Check also if the logs/ directory is created in your Tigase server location as sometimes unpacking application doesn&#8217;t create empty directories.</p><p>Now when you have the configuration file and databases ready to use you can start the Tigase server with the following command:</p><pre class="programlisting">./bin/tigase.sh start etc/tigase.conf</pre><p>If you run the Tigase server installed from sources the command would be:</p><pre class="programlisting">./scripts/tigase.sh start etc/tigase.conf</pre><p>There are system startup scripts for Gentoo and Mandriva Linux on bin/ or scripts/ directory which can be used to automatically start the server when system starts.</p><p>Now you can register an account on your Drupal website and connect with an XMPP client using the account details.</p><p><span class="strong"><strong>Note!</strong></span> <span class="emphasis"><em>You have to enable plain password authentication in your XMPP client to connect to Tigase server with Drupal database</em></span></p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="integrateWithLibreSource"></a>Integrating Tigase Server With LibreSource</h3></div></div></div><p><span class="strong"><strong>This document is still not finished.</strong></span></p><p>Taken directly from <a class="link" href="http://dev.libresource.org/" target="_top">LibreSource</a> page:</p><p><span class="emphasis"><em>LibreSource is a collaborative platform dedicated to both software development and community building. Based on Java/J2EE technology, LibreSource is a modular web server that users can customize online by combining resources and rights: wiki pages, forum, trackers, files, download areas, etc. All the tools are included and integrated.</em></span></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_short_introduction"></a>Short Introduction</h4></div></div></div><p>Integration between <span class="strong"><strong>Tigase</strong></span> server and <span class="strong"><strong>LibreSource</strong></span> is on a database level. It is implemented in the same way as integration with <span class="strong"><strong>Drupal</strong></span> but with slightly more functions available.</p><p>Basically LibreSource system maintains own database with all it&#8217;s data and Tigase connects to LibreSource database to authenticate users. All user data specific to XMPP service are kept in separate tables which can be located in the same database as LibreSource data or in different database.</p><p>Current list of features included in the integration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">XMPP users authentication against user data stored in LibreSource database.</li><li class="listitem">Recording XMPP user on-line status in LibreSource database. This can be displayed on the Web page as additional user info.</li><li class="listitem">Recording user last login time and this information can also be available on Web page.</li><li class="listitem">Checking user account status. So if the user account is disabled in LibreSource system then this user will not be able to login to XMPP service too.</li><li class="listitem">User account creation. This feature might be useful during testing time or user data transition from an old Tigase installation to LibreSource system. <span class="emphasis"><em>Please note! This feature should be normally disabled on live system. All user account management should be done from LibreSource system because of data caching.</em></span></li><li class="listitem">User account deletion. <span class="emphasis"><em>Please note! This feature should be normally disabled on live system. All user account management should be done from LibreSource system because of data caching.</em></span></li></ul></div><p>A few assumptions:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">LibreSource data are kept in PostgreSQL database - libresource and database user is demo.</li><li class="listitem">For use in cases where Tigase data are stored in MySQL database name is tigase, database user is dbuser and database user password is dbpass</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_how_to_set_tigase_up"></a>How to set Tigase up</h4></div></div></div><p>Now we will focus on setting things up to have both services up and running together. Below is example of the most complex environment to run where LibreSource is using PostgreSQL database and Tigase is using a MySQL database. All basic user data needed for authentication is kept by LibreSource, so Tigase has to connect to PostgreSQL database also in order to authenticate users.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">First you need LibreSource system up and running. Please refer to LS documentation for details.</li><li class="listitem">Install Tigase server in the normal way including loading Tigase database schema. Database tables used by Tigase server use different naming convention so you can simply load Tigase DB schema to the same database as LibreSource data. It is also possible and recommended to keep Tigase data in separate database.</li><li class="listitem"><p class="simpara">Using configuration wizards generate configuration for Tigase server to connect to LibreSource database. Here is the sample file with parameters for configuration wizard assuming following setup:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">LibreSource data are kept in PostgreSQL database: libresource, user: demo</li><li class="listitem">Tigase data are kept in MySQL database: tigase, user: dbuser, password: dbpass</li><li class="listitem">No external components are connected to Tigase server</li><li class="listitem"><p class="simpara">Tigase works for domain: domain.net</p><pre class="programlisting">ENC="-Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8"
DRV="-Djdbc.drivers=com.mysql.jdbc.Driver:org.postgresql.Driver"

JAVA_OPTIONS="${ENC} ${DRV} -server -Xms100M -Xmx100M "
TIGASE_CONFIG="etc/tigase-mysql-libresource.xml"
TIGASE_OPTIONS="--gen-config-def \
  --user-db mysql \
  --user-db-uri jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass&amp;autoCreateUser=true \
  --auth-db libresource \
  --auth-db-uri jdbc:postgresql://localhost/libresource?user=demo \
  --virt-hosts domain.net,localhost "</pre></li></ul></div></li><li class="listitem"><p class="simpara">A simpler example where all data (LibreSource and Tigase) are stored in the same database:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">LibreSource data are kept in PostgreSQL database: libresource, user: demo</li><li class="listitem">Tigase data are kept also in PostgreSQL database: libresource, user: demo</li><li class="listitem">No external components are connected to Tigase server</li><li class="listitem"><p class="simpara">Tigase works for domain: domain.net</p><pre class="programlisting">ENC="-Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8"
DRV="-Djdbc.drivers=com.mysql.jdbc.Driver:org.postgresql.Driver"

JAVA_OPTIONS="${ENC} ${DRV} -server -Xms100M -Xmx100M "
TIGASE_CONFIG="etc/tigase-mysql-libresource.xml"
TIGASE_OPTIONS="--gen-config-def \
  --user-db pgsql \
  --user-db-uri jdbc:postgresql://localhost/libresource?user=demo&amp;autoCreateUser=true \
  --auth-db libresource \
  --auth-db-uri jdbc:postgresql://localhost/libresource?user=demo \
  --virt-hosts domain.net,localhost "</pre></li></ul></div></li></ol></div><p>Now, you can run Tigase as normal and it all works.</p><p><span class="strong"><strong>Note!</strong></span> <span class="emphasis"><em>You have to load Tigase database schema for user data. Please refer to guide for specific database: <a class="link" href="existingData.html#mysql2database" title="MySQL Database Use">MySQL</a> or <a class="link" href="existingData.html#postgresDB2" title="PostgreSQL Database Use">PostgreSQL</a>.</em></span></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_migration_from_an_old_tigase_installation_to_libresource"></a>Migration From an old Tigase Installation to LibreSource</h4></div></div></div><p>Tigase package includes additional tools to make it easier to manage and control you installation. One is used to change configuration settings - config.sh and another is used to manipulate user data in repository - repo.sh.</p><p>Depending on whether you use Tigase version built from sources or binary version these scripts might be available in either scripts/ or bin/ subdirectories. To make things simpler let&#8217;s assume they are stored in scripts/ directory.</p><p>Assuming you have an old Tigase server installation with number of users in MySQL database and you want to migrate all of them to LibreSource there are 2 steps involved:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">User data migration</li><li class="listitem">Changing your existing configuration</li></ol></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="_data_migration"></a>Data Migration</h5></div></div></div><p>First we need to migrate user data used for authentication. That data will be used by both services: <span class="emphasis"><em>LibreSource</em></span> and <span class="emphasis"><em>Tigase</em></span> and they normally stored in <span class="emphasis"><em>LibreSource</em></span> database. Therefore we have to use <span class="emphasis"><em>LibreSource</em></span> database connector to handle the data (write or read). <span class="emphasis"><em>Tigase</em></span> server will be using <span class="emphasis"><em>LibreSource</em></span> database for reading only but during migration time we need to write user accounts to LS database. Sample command to migrate user accounts looks like this:</p><pre class="programlisting">./scripts/repo.sh -sc tigase.db.jdbc.JDBCRepository \
  -su "jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass" \
  -dc tigase.db.jdbc.LibreSourceAuth \
  -du "jdbc:postgresql://localhost/libresource?user=demo" \
  -cp</pre><p>The above command will copy all user accounts from MySQL tigase database to libresource database. Please refer to repository management tool documentation for information how to migrate single or selected user accounts.</p><p>If you want to keep all Tigase server data in the same database you have to copy also all other user data like rosters, vCards and so on.</p><p>First thing we have to do is load the database schema for Tigase data. Because Tigase tables have distinct names from LibreSource, there is no danger for any conflict. As in the above example let&#8217;s assume LibreSource&#8217;s data is stored in libresource database and database user name is demo:</p><pre class="programlisting">psql -q -U demo -d libresource -f database/postgresql-schema.sql</pre><p>Now we can load and transfer all user data from MySQL database to LibreSource:</p><pre class="programlisting">./scripts/repo.sh -sc tigase.db.jdbc.JDBCRepository \
  -su "jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass" \
  -dc tigase.db.jdbc.JDBCRepository \
  -du "jdbc:postgresql://localhost/libresource?user=demo" \
  -cp</pre><p>This command looks siumilar to the previous one. Just a Java class used for handling destination database is different.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql2database"></a>MySQL Database Use</h3></div></div></div><p>This guide describes how to configure Tigase server to use <a class="link" href="http://www.mysql.com/" target="_top">MySQL</a> database as a user repository.</p><p>If you used an XML based user repository before you can copy all user data to MySQL database using repository management tool. All steps are described below.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_mysql_database_preparation"></a>MySQL Database Preparation</h4></div></div></div><p>To load db schema to your MySQL instance first create database:</p><pre class="programlisting">mysqladmin -p create tigase</pre><p>And then you can load database schema:</p><pre class="programlisting">mysql -u dbuser -p tigase &lt; mysql-schema.sql</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_server_configuration"></a>Server Configuration</h4></div></div></div><p>Now you have to change configuration to load a jdbc module instead of XML based repository. Using configuration management script, first change class name handling repository.</p><p>To see current settings run command:</p><pre class="programlisting">$ ./scripts/config.sh -c tigase-config.xml -print -key session_1/user-repo-class</pre><p>As a result you should see something like:</p><pre class="programlisting">session_1/user-repo-class = tigase.db.xml.XMLRepository</pre><p>You can see that current setting points to the XML repository implementation. To use jdbc module for connecting to MySQL database you have to set tigase.db.jdbc.JDBCRepository class (enter text below in one line):</p><pre class="programlisting">$ ./scripts/config.sh -c tigase-config.xml -print -key session_1/user-repo-class -value tigase.db.jdbc.JDBCRepository -set</pre><p>As a result you will see new value set for the parameter:</p><pre class="programlisting">session_1/user-repo-class = tigase.db.jdbc.JDBCRepository</pre><p>You have also to set the same value as authorization repository unless you want to use different authorization data source:</p><pre class="programlisting"> $ ./scripts/config.sh -c tigase-config.xml -print -key session_1/auth-repo-class -value tigase.db.jdbc.JDBCRepository -set</pre><p>And again as a result we can see:</p><pre class="programlisting">session_1/auth-repo-class = tigase.db.jdbc.JDBCRepository</pre><p>Next step is to set the database connection string. Assuming you have database: <span class="strong"><strong>tigase</strong></span> on <span class="strong"><strong>localhost</strong></span> with database user: <span class="strong"><strong>dbuser</strong></span> and password <span class="strong"><strong>dbpass</strong></span> your connection string will look like this:</p><pre class="programlisting">jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass</pre><p>To set this in your configuration file, you have to the configuration management script 2 times. First for user data repository and second for authorization data repository:</p><pre class="programlisting">$ ./scripts/config.sh -c tigase-config.xml -print -key session_1/user-repo-url -value "jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass" -set
$ ./scripts/config.sh -c tigase-config.xml -print -key session_1/auth-repo-url -value "jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass" -set</pre><p><span class="strong"><strong>Note quotes around connection string.</strong></span> They are needed to make sure the shell won&#8217;t interpret special characters.</p><p>Now the configuration is ready to load the jdbc module and connect to your database.</p><p>One more thing you need to do is to tell JVM which jdbc driver to use to connect to database. Depending on your MySQL and jdbc installation it might be: com.mysql.jdbc.Driver. To set is as database driver you have to set is a jdbc.drivers property value. Usually you do this by adding -D parameter to Java call:</p><pre class="programlisting"> $ java -Djdbc.drivers=com.mysql.jdbc.Driver tigase.server.XMPPServer</pre><p>If you use tigase.sh script to run server you will have to add -Djdbc.drivers=com.mysql.jdbc.Driver to the startup script init.Properties property file to JAVA_OPTIONS values.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_user_data_import"></a>User Data Import</h4></div></div></div><p>If you previously used an XML based user repository, you can import all data into a MySQL database using repository management tool. This is quite long command so let me list all required parameters first with brief explanation:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>-cp</strong></span> copy content of the source repository to destination repository.</li><li class="listitem"><span class="strong"><strong>-sc</strong></span> <span class="strong"><strong>tigase.db.xml.XMLRepository</strong></span> source repository class.</li><li class="listitem"><span class="strong"><strong>-su</strong></span> <span class="strong"><strong>user-repository.xml</strong></span> source repository connection string - assuming your user repository is in user-repository.xml file.</li><li class="listitem"><span class="strong"><strong>-dc</strong></span> <span class="strong"><strong>tigase.db.jdbc.JDBCRepository</strong></span> destination repository class.</li><li class="listitem"><span class="strong"><strong>-du</strong></span> <span class="strong"><strong>"jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass"</strong></span> destination repository connection string.</li></ol></div><p>And now whole command. Enter all in one line:</p><pre class="programlisting">$ ./scripts/repo.sh -cp -sc tigase.db.xml.XMLRepository -su user-repository.xml -dc tigase.db.jdbc.JDBCRepository -du "jdbc:mysql://localhost/tigase?user=dbuser&amp;password=dbpass"</pre><p>For more information how to use command line administration tools refer to <a class="link" href="commandLineTools2.html" title="Command Line Admin Tools">command line tools guide.</a></p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="postgresDB2"></a>PostgreSQL Database Use</h3></div></div></div><p>This guide describes how to configure Tigase server to use <a class="link" href="http://www.postgresql.org/" target="_top">PostgreSQL</a> database as a user repository.</p><p>If you used an XML based user repository before you can copy all user data to PostgreSQL database using repository management tool. All steps are described below.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_postgresql_database_preparation"></a>PostgreSQL Database Preparation</h4></div></div></div><p>Create new database user account which will be used to connect to your database:</p><pre class="programlisting"># createuser
Enter name of user to add: tigase
Shall the new user be allowed to create databases? (y/n) y
Shall the new user be allowed to create more new users? (y/n) y</pre><p>Now using new database user account create database for your service:</p><pre class="programlisting"># createdb -U tigase tigasedb
CREATE DATABASE</pre><p>Now you can load the database schema:</p><pre class="programlisting"># psql -U tigase -d tigasedb -f postgresql-schema.sql</pre><p>Now the database is ready for Tigase server to use.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_server_configuration_2"></a>Server Configuration</h4></div></div></div><p>Server configuration is identical as MySQL database setup. The same jdbc module is used to connect to PostgreSQL database as for MySQL. The only difference is the connection string which usually looks like:</p><pre class="programlisting">jdbc:postgresql://localhost/tigasdb?user=tigase</pre><p>So for more detailed guide how to change configuration refer to <a class="link" href="existingData.html#mysql2database" title="MySQL Database Use">MySQL database use guide</a> or if you look for a more automatic configuration file generation refer to <a class="link" href="">configuration wizards</a> page.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dbImportingData.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="databasemgnt.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="oldVerSchemas.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Importing User Data&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Schema Updates</td></tr></table></div></body></html>