<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="index.html" title="Tigase Administration Guide"><link rel="prev" href="tigase41virtualHosts.html" title="Virtual Hosts in Tigase Server"><link rel="next" href="debuggingTigase.html" title="Debuging Tigase"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tigase41virtualHosts.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="debuggingTigase.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_using_tigase_applies_to_all_tigase_server_versions"></a>Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#logs">Tigase Log Guide</a></span></dt><dd><dl><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_install_log">install.log</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_derby_log">derby.log</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_config_dump_properties">config-dump.properties</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_tigase_log">tigase.log.#</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_statistics_log">statistics.log.#</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_tigase_pid">tigase.pid</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_tigase_console_log">tigase-console.log</a></span></dt><dt><span class="section"><a href="_using_tigase_applies_to_all_tigase_server_versions.html#_log_file_location">Log File Location</a></span></dt></dl></dd><dt><span class="section"><a href="debuggingTigase.html">Debuging Tigase</a></span></dt><dd><dl><dt><span class="section"><a href="debuggingTigase.html#_the_easy_way_init_properties_file">The easy way - init.properties file</a></span></dt><dt><span class="section"><a href="debuggingTigase.html#_the_more_difficult_but_more_powerful_tigase_xml_file_only_applicable_to_versions_before_5_0_0">The more difficult but more powerful - tigase.xml file (only applicable to versions before 5.0.0)</a></span></dt></dl></dd><dt><span class="section"><a href="systemchecks.html">Basic System Checks</a></span></dt><dt><span class="section"><a href="addManageDomain.html">Add and Manage Domains</a></span></dt><dd><dl><dt><span class="section"><a href="addManageDomain.html#_adding_a_new_domain">Adding a New Domain</a></span></dt><dt><span class="section"><a href="addManageDomain.html#_adding_a_new_user">Adding a New User</a></span></dt><dt><span class="section"><a href="addManageDomain.html#_ssl_certificate_management">SSL Certificate Management</a></span></dt></dl></dd><dt><span class="section"><a href="presenceForwarding.html">Presence Forwarding</a></span></dt><dt><span class="section"><a href="registerXMPP.html">Register Your Own XMPP Domain</a></span></dt><dt><span class="section"><a href="Pymsn-t.html">Tigase and PyMSN-t Transport</a></span></dt><dd><dl><dt><span class="section"><a href="Pymsn-t.html#_pymsn_t_etc_jabber_pymsn_t_xml_file">PyMSN-t - /etc/jabber/pymsn-t.xml file</a></span></dt><dt><span class="section"><a href="Pymsn-t.html#_pymsn_t_run_command">PyMSN-t - run command</a></span></dt><dt><span class="section"><a href="Pymsn-t.html#_pymsn_t_expected_output">PyMSN-t - expected output</a></span></dt><dt><span class="section"><a href="Pymsn-t.html#_tigase_etc_tigase_conf_file">Tigase - etc/tigase.conf file</a></span></dt><dt><span class="section"><a href="Pymsn-t.html#_tigase_run_command">Tigase - run command</a></span></dt><dt><span class="section"><a href="Pymsn-t.html#_tigase_expected_output">Tigase - expected output</a></span></dt></dl></dd><dt><span class="section"><a href="multiplesessionmanagers.html">Two or More SessionManagers</a></span></dt><dt><span class="section"><a href="watchdog.html">Watchdog</a></span></dt><dd><dl><dt><span class="section"><a href="watchdog.html#_setup_2">Setup</a></span></dt><dt><span class="section"><a href="watchdog.html#_watchdog_configuration">Watchdog Configuration</a></span></dt><dt><span class="section"><a href="watchdog.html#_logic">Logic</a></span></dt><dt><span class="section"><a href="watchdog.html#_testing">Testing</a></span></dt></dl></dd><dt><span class="section"><a href="tipsAndTricks.html">Tips and Tricks</a></span></dt><dd><dl><dt><span class="section"><a href="tipsAndTricks.html#tigaseTip_RuntimeEnvironment">Tigase Tip: Checking the Runtime Environment</a></span></dt></dl></dd><dt><span class="section"><a href="commandLineTools2.html">Command Line Admin Tools</a></span></dt><dd><dl><dt><span class="section"><a href="commandLineTools2.html#configurationManagement2">Configuration Management Tool</a></span></dt></dl></dd><dt><span class="section"><a href="scriptsupport.html">Scripting support in Tigase</a></span></dt><dd><dl><dt><span class="section"><a href="scriptsupport.html#scriptingintro">Scripting Introduction - Hello World!</a></span></dt><dt><span class="section"><a href="scriptsupport.html#newElements">Tigase Scripting Version 4.4.x Update for Administrators</a></span></dt><dt><span class="section"><a href="scriptsupport.html#tigaseandPython">Tigase and Python</a></span></dt></dl></dd><dt><span class="section"><a href="tigase3xconfiguration.html">Configuration Wizards</a></span></dt><dt><span class="section"><a href="offlineMessages.html">Offline Messages</a></span></dt><dd><dl><dt><span class="section"><a href="offlineMessages.html#offlineMessageLimits">Offline Message Limits</a></span></dt><dt><span class="section"><a href="offlineMessages.html#nonBodyElements">Storing offline messages without body content</a></span></dt><dt><span class="section"><a href="offlineMessages.html#disableOfflineMessages">Disabling Offline Messages</a></span></dt></dl></dd><dt><span class="section"><a href="licenseserver.html">Licensing</a></span></dt><dd><dl><dt><span class="section"><a href="licenseserver.html#_registering_for_a_license">Registering for a License</a></span></dt><dt><span class="section"><a href="licenseserver.html#_what_happens_if_i_do_not_use_a_license_file_or_it_is_expired">What happens if I do not use a license file or it is expired?</a></span></dt><dt><span class="section"><a href="licenseserver.html#_demo_mode">Demo mode</a></span></dt><dt><span class="section"><a href="licenseserver.html#_unauthorized_use">Unauthorized use</a></span></dt><dt><span class="section"><a href="licenseserver.html#_manual_mode">Manual mode</a></span></dt></dl></dd><dt><span class="section"><a href="tigaseAdvancedOptions.html">Tigase Advanced Options</a></span></dt><dd><dl><dt><span class="section"><a href="tigaseAdvancedOptions.html#_enabling_support_for_storing_offline_messages_without_body_content">Enabling Support for storing offline messages without body content</a></span></dt><dt><span class="section"><a href="tigaseAdvancedOptions.html#emptyNicks">Enabling Empty Nicknames</a></span></dt><dt><span class="section"><a href="tigaseAdvancedOptions.html#accountRegLimit">Account Registration Limits</a></span></dt><dt><span class="section"><a href="tigaseAdvancedOptions.html#silentIgnore">Enable Silent Ignore on Packets Delivered to Unavailable Resources</a></span></dt><dt><span class="section"><a href="tigaseAdvancedOptions.html#errorCounting">Mechanism to count errors within Tigase</a></span></dt></dl></dd><dt><span class="section"><a href="tigaseClustering.html">Tigase Clustering</a></span></dt><dd><dl><dt><span class="section"><a href="tigaseClustering.html#_configuration_14">Configuration</a></span></dt><dt><span class="section"><a href="tigaseClustering.html#_old_configuration_method">Old configuration method</a></span></dt><dt><span class="section"><a href="tigaseClustering.html#_checking_cluster_connections">Checking Cluster Connections</a></span></dt></dl></dd><dt><span class="section"><a href="anonymousUsers.html">Anonymous Users &amp; Authentication</a></span></dt><dd><dl><dt><span class="section"><a href="anonymousUsers.html#_anonymous_authentication">Anonymous Authentication</a></span></dt><dt><span class="section"><a href="anonymousUsers.html#_anonymous_user_features">Anonymous User Features</a></span></dt></dl></dd></dl></div><p>This section keeps set of documents which apply to all the Tigase server version and contain more generic or introductory information on general use and features.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="_using_tigase_applies_to_all_tigase_server_versions.html#logs" title="Tigase Log Guide">Tigase Log Guide</a></li><li class="listitem"><a class="link" href="debuggingTigase.html" title="Debuging Tigase">Debugging Tigase</a></li><li class="listitem"><a class="link" href="systemchecks.html" title="Basic System Checks">Basic System Checks</a></li><li class="listitem"><a class="link" href="addManageDomain.html" title="Add and Manage Domains">Add and Manage Domains</a></li><li class="listitem"><a class="link" href="presenceForwarding.html" title="Presence Forwarding">Presence Forwarding</a></li><li class="listitem"><a class="link" href="registerXMPP.html" title="Register Your Own XMPP Domain">Register Your Own XMPP Domain</a></li><li class="listitem"><a class="link" href="Pymsn-t.html" title="Tigase and PyMSN-t Transport">Tigase and PyMSN Transport</a></li><li class="listitem"><a class="link" href="multiplesessionmanagers.html" title="Two or More SessionManagers">Multiple Session Managers</a></li><li class="listitem"><a class="link" href="watchdog.html" title="Watchdog">Watchdog</a></li><li class="listitem"><p class="simpara"><a class="link" href="">Tips And Tricks</a></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="tipsAndTricks.html#tigaseTip_RuntimeEnvironment" title="Tigase Tip: Checking the Runtime Environment">Runtime Environment Tip</a></li><li class="listitem"><a class="link" href="">Checking Cluster Connections</a></li><li class="listitem"><a class="link" href="tipsAndTricks.html#bestWebPrax" title="Best Practices for Connecting to Tigase XMPP server From Web Browser">Best Practices for Connecting to Tigase XMPP server From Web Browser</a></li></ol></div></li><li class="listitem"><p class="simpara"><a class="link" href="commandLineTools2.html" title="Command Line Admin Tools">Command Line Tools</a></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="commandLineTools2.html#configurationManagement2" title="Configuration Management Tool">Configuration Management Tool</a></li></ol></div></li><li class="listitem"><p class="simpara"><a class="link" href="">Scripting Support in Tigase</a></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="scriptsupport.html#scriptingintro" title="Scripting Introduction - Hello World!">Scripting Introduction - Hello World!</a></li><li class="listitem"><a class="link" href="scriptsupport.html#newElements" title="Tigase Scripting Version 4.4.x Update for Administrators">Tigase Scripting Version 4.4.x Update for Administrators</a></li><li class="listitem"><a class="link" href="scriptsupport.html#tigaseandPython" title="Tigase and Python">Tigase and Python Scripting</a></li></ol></div></li><li class="listitem"><a class="link" href="tigase3xconfiguration.html" title="Configuration Wizards">Configuration Wizards</a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="logs"></a>Tigase Log Guide</h2></div></div></div><p>Tigase has multiple levels of logging available to help provide targeted and detailed information on processes, components, or traffic. In these documents we will look at where tigase generates logs, what they contain, and how we can customize them to our needs.</p><p>The list of available documents here is presented from the Tigase root directory.</p><pre class="programlisting">*/*
derby.log
install.log

*/etc*
config-dump.properties

*/logs*
tigase.log.#
tigase.pid
tigase-console.log</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_install_log"></a>install.log</h3></div></div></div><p>This log file is a basic list of files that are made on install of Tigase server.  Although you may not need to use it, it can provide a handy list to see if any files were not written to your hard drive upon installation.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_derby_log"></a>derby.log</h3></div></div></div><p>If you are using the derby database installed with Tigase installer, this is the startup log for the database itself.  Issues that might be related to the database, can be found in this file.  Typically, if everything works okay, it&#8217;s a very small file with only 10 lines.  It is overwritten on startup of the datbase.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_config_dump_properties"></a>config-dump.properties</h3></div></div></div><p>The config-dump.properties is dump file of all your properties listed for every option within Tigase and components.  The structure of the log lines is as follows.</p><pre class="screen">modulename/settingformodulename[Data type]=value(s)</pre><p>Lets take the value for admins, listing who is administrator for the server.</p><pre class="screen">basic-conf/admins[s]=admin@jabber.freehost.org, administrator@jabber.freehost.org, fJones@jabber.freehost.org</pre><p>The admin parameter which is an array of strings noted by the s, has 3 users listed.
<span class="strong"><strong>NOTE</strong></span> you can lookup the available Data types in the <a class="link" href="configuration.html#initPropertiesGuide" title="Tigase XMPP Server init.properties Configuration">init.properties guide</a>.</p><p>This file is re-written every time tigase starts.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_tigase_log"></a>tigase.log.#</h3></div></div></div><p>The tigase.log files are where the majority of logging will take place. The rules for writing to these longs can be manipulated by editing files in the int.properties file.  To see how, see the <a class="link" href="debuggingTigase.html" title="Debuging Tigase">Debugging Tigase</a> section of this manual for more details about how to turn on debug logging, and how to manipulate log settings.
Entries to these logs are made in the following format:</p><pre class="screen">2015-08-10 13:09:41.504 [main]      Sctipr.init()         INFO: Initilized script command, id: comp-manager, lang:Groovy, ext: groovy</pre><p>The format of these logs is below:
&lt;timestamp&gt; &lt;thread_name&gt; &lt;class&gt;.&lt;method&gt;    &lt;log_level&gt;: &lt;message&gt; &lt;thread_name&gt;. This can vary - for components it would be &lt;direction&gt;_&lt;int&gt;_&lt;component name&gt;, for plugins it will just be the plugin name.</p><p>Let&#8217;s look at another example from the log file.</p><pre class="screen">2015-08-10 12:31:40.893 [in_14_muc] InMemoryMucRepository.createNewRoom()   FINE: Creating new room 'chatroom@muc.localhost.com'</pre><p>The process ID may sometimes come in a different format such as <code class="literal">[in_14-muc]</code> which specifies the component (muc) along with the process thread identifier (14).  As you can see, the format otherwise is nearly identical.</p><p>tigase.log can get very large in size rather quickly reaching it&#8217;s maximum size.  To prevent the loss of information, we have implemented a rotating file system.  The server begins writing to tigase.log.0 when it is first run, and continues to dump information until the log size limit is hit. At this point, Tigase renames tigase.log.0 as tigase.log.1. A new tigase.log.0 will be created, and Tigase will begin logging to this file.  When this file is full, tigase.log.1 will be renamed tigase.log.2 and tigase.log.0 will be renamed tigase.log.1.  Using this scheme, tigase.log.0 will <span class="strong"><strong>always</strong></span> be your most recent log.</p><p>By default, Tigase has a limit of 10000000 bytes or 10mb with a file rotation of 10 files. You can edit these values by editing the init.properties guide and adding the following lines.</p><pre class="programlisting">basic-conf/logging/java.util.logging.FileHandler.limit=20000000
basic-conf/logging/java.util.logging.FileHandler.count=15</pre><p>This code, if entered into the init.properties file increases the size of the files to 15, and enlarges the maximum size to 20mb.  Note the larger the collective log space is, the larger number of sectors on hard disk are active.  Large log blocks may impact system performance.</p><p><span class="emphasis"><em>You may see a tigase.log.0.ick file in the directory while the server is running.  This is a temporary file only and is deleted once Tigase is cleanly shut down.</em></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_statistics_log"></a>statistics.log.#</h3></div></div></div><p>Statistics log will duplicate any information that is related to sending of statistics to Tigase if you are using an unlicenced copy of Tigase XMPP server.  Mainly it will consist output of LicenceChecker.  The numbering logic will be the same as tigase.log.# files.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_tigase_pid"></a>tigase.pid</h3></div></div></div><p>tigase.pid is a file that just contains the Process ID or PID for the current run of Tigase. It is only valid for the current or most recent run cycle and is overwritten every time Tigase starts.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_tigase_console_log"></a>tigase-console.log</h3></div></div></div><p>This file contains information related to Tigase&#8217;s running environment, and is a dump from the server itself on what is being loaded, when, and if any issues are encountered.
It will start by loading Java classes (consequently making sure the Java environment is present and functioning).  Then it will begin loading the configuration file, and adding default values to settings that have not been customized.  You can then see all the components being loaded, and settings added where default values are needed.  Lastly you will see a log of any plugins that are loaded, and any parameters therein.
You may see tags such as INFO or WARNING in the logs. Although they may contain important information, the program will continue to operate as normal are not of too great concern.</p><p>ERROR flags are issues you will want to pay attention as they may list problems that prevent Tigase or components from properly functioning.</p><p><span class="strong"><strong>NOTE</strong></span> Windows does not create this file, rather the output is shown in the commandline and is not dumped to a file.</p><p>If Tigase is gracefully shut down, tigase-console.log will add statistics from the server&#8217;s operation life in the following format.</p><pre class="screen">component/statistic = value</pre><p><span class="emphasis"><em>Any component that may have a statistic, whether used or not, will place a value here</em></span></p><p>This file can be handy if you are tracking issues in the server.</p><p>tigase-console.log is appended during each run session of the server.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_log_file_location"></a>Log File Location</h3></div></div></div><p>You can also change the location of log files if you have a specific directory you wish to use.  The configuration may be made by the following line in your init.properties file:</p><pre class="programlisting">basic-conf/logging/java.util.logging.FileHandler.pattern=/var/log/tigase/tigase.log</pre><p>This setting changes the log file location to /var/log/tigase/ where all log files will be made.  Files in the original location will be left.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tigase41virtualHosts.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="debuggingTigase.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Virtual Hosts in Tigase Server&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Debuging Tigase</td></tr></table></div></body></html>