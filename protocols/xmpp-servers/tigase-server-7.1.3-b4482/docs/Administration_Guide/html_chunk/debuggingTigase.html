<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Debuging Tigase</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_using_tigase_applies_to_all_tigase_server_versions.html" title="Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions"><link rel="prev" href="_using_tigase_applies_to_all_tigase_server_versions.html" title="Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions"><link rel="next" href="systemchecks.html" title="Basic System Checks"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Debuging Tigase</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_using_tigase_applies_to_all_tigase_server_versions.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="systemchecks.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="debuggingTigase"></a>Debuging Tigase</h2></div></div></div><p>If something goes wrong and you can&#8217;t find out why it is not working as expected, you might want more detailed debugging options switched on.</p><p>Tigase is a Java application and it uses Java logging library, this gives you the flexibility to switch logging on for selected Java packages or even for a single Java class.</p><p>Logs files are stored in logs/ directory. tigase-console.log stores basic log data, but is the main log file. tigase.log.N files keep all the detailed logging entries. So this is the place where you should look in case of problems.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_the_easy_way_init_properties_file"></a>The easy way - init.properties file</h3></div></div></div><p>The easiest way to change logging for Tigase is modifying in init.properies following line:</p><pre class="programlisting">--debug=server</pre><p>The line above says: "<span class="emphasis"><em>Switch on ALL debug messages for packet: tigase.server</em></span>". The tigase.server packet keeps all it&#8217;s component&#8217;s classes, so it allows you to monitor what is going on in each component, what packets it receives and what it is sending out.</p><p>Usually people want to see what is going on the network level. That is what has been sent and what has been received by the server - the actual character data. The class which would print all received and sent character data is: tigase.xmpp.XMPPIOService. To enable all debugging info for this class you have to modify the debug line:</p><pre class="programlisting">--debug=xmpp.XMPPIOService</pre><p><span class="emphasis"><em>Note, you can skip the tigase. part.</em></span></p><p>You can also have debugging switched on for many packages/classes at the same time:</p><pre class="programlisting">--debug=server,xmpp.XMPPIOService</pre><p>Other packages you might be interested in are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">tiagse.io and tigase.net which can print out what is going on a very low level network level including TLS/SSL stuff.</li><li class="listitem">tigase.xml would print the XML parser debugging data.</li><li class="listitem"><p class="simpara">tigase.cluster would print all the clustering related stuff. So if you have clustered installation you might be interested in debug settings:</p><pre class="programlisting">--debug=server,cluster</pre></li><li class="listitem">tigase.xmpp.impl would print logs from all plugins loaded to Tigase server.</li></ul></div><p>This method, however has 2 main disadvantages:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">You have to remove your XML config file and regenerate it which might be inconvenient. (only applicable to versions before 5.0.0)</li><li class="listitem">You can&#8217;t set logging this way for classes and packages other than Tigase. This might be a problem if you include your own code in and load it into the server.</li></ol></div><p>To enable logging for your own packages from packages different than Tigase, you have to use another option which has been made available for this:</p><pre class="programlisting">--debug-packages = your.com.package</pre><p>You can also specify more parameters for the Tigase logging mechanisms like the file size, number of files rotated, and location where all Tigase logs are stored. The following lines are some examples of those filters using lines in the init.properties file:</p><pre class="programlisting">basic-conf/logging/java.util.logging.FileHandler.limit=100000000
basic-conf/logging/java.util.logging.FileHandler.count=20
basic-conf/logging/java.util.logging.FileHandler.pattern=/var/log/tigase/tigase.log</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_the_more_difficult_but_more_powerful_tigase_xml_file_only_applicable_to_versions_before_5_0_0"></a>The more difficult but more powerful - tigase.xml file (only applicable to versions before 5.0.0)</h3></div></div></div><p>If you want to modify debugging settings without regenerating the whole XML config file, you can modify it yourself by manually adding debug entries. This must be done very carefully or you could break the XML file and configuration won&#8217;t work.</p><p>Open the XML config file with a good text editor (or XML editor) and find the line:</p><pre class="programlisting">&lt;node name="logging"&gt;</pre><p>Below is a list of all logging settings.</p><pre class="programlisting">&lt;entry value="INFO" type="String" key=".level"/&gt;</pre><p>Which says: INFO debug level for all the code which gives you very little debugging information. For example your init.properties line --debug=server adds one extra line in there:</p><pre class="programlisting">&lt;entry value="ALL" type="String" key="tigase.server.level"/&gt;</pre><p>You can add a similar line changing only "key" attribute. If you need to switch logging on for a specific class - tigase.xmpp.XMPPIOService for example, add:</p><pre class="programlisting">&lt;entry value="ALL" type="String" key="tigase.xmpp.XMPPIOService.level"/&gt;</pre><p>You can also put there your own package or class name. After you changed the config file you will have to restart the server.</p><p><span class="emphasis"><em>Note, don&#8217;t overdose the debugging or your logs will be loaded with useless information.</em></span></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_using_tigase_applies_to_all_tigase_server_versions.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_using_tigase_applies_to_all_tigase_server_versions.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="systemchecks.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Basic System Checks</td></tr></table></div></body></html>