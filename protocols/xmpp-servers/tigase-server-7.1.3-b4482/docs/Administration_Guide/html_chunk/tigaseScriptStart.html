<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Tigase Script Selection</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="QuickStart.html" title="Chapter&nbsp;3.&nbsp;Quick Start Guide"><link rel="prev" href="setupTigaseServer.html" title="Tigase Server Network Instructions"><link rel="next" href="shuttingDown.html" title="Shutting Down Tigase"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tigase Script Selection</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="setupTigaseServer.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Quick Start Guide</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="shuttingDown.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tigaseScriptStart"></a>Tigase Script Selection</h2></div></div></div><p>As mentioned in each of the quick start sections, each distribution of Tigase XMPP server comes with a number of scripts that are customized for different versions of Linux.</p><div class="table"><a name="d0e2110"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;init.d chart</b></p><div class="table-contents"><table summary="init.d chart" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top">Operating system</th><th align="left" valign="top">init.d file path</th><th align="left" valign="top">Types of Operating Systems</th></tr></thead><tbody><tr><td align="left" valign="top"><p>Debian</p></td><td align="left" valign="top"><p><code class="literal">tigase-server/scripts/debian/tigase.init.d</code></p></td><td align="left" valign="top"><p>Knoppix, Ubuntu (before v15.04), Raspbian or Duvian</p></td></tr><tr><td align="left" valign="top"><p>Gentoo</p></td><td align="left" valign="top"><p><code class="literal">tigase-server/scripts/gentoo/init.d/tigase</code></p></td><td align="left" valign="top"><p>CoreOS (before v94.0.0), Tin Hat Linux or other *too based systems</p></td></tr><tr><td align="left" valign="top"><p>Mandriva</p></td><td align="left" valign="top"><p><code class="literal">tigase-server/scripts/mandriva/init.d/tigase</code></p></td><td align="left" valign="top"><p>Specific init.d file for Mandriva Linux</p></td></tr><tr><td align="left" valign="top"><p>Redhat</p></td><td align="left" valign="top"><p><code class="literal">tigase-server/scripts/redhat/init.d/tigase</code></p></td><td align="left" valign="top"><p>RedHat (before v7.0) and other RPM based linux derivatives like CentOS (before v.7.14), openSUSE (before v12.2)</p></td></tr></tbody></table></div></div><br class="table-break"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configuration_for_all_linux_distributions"></a>Configuration: For All Linux Distributions</h3></div></div></div><p>Once you&#8217;ve located the appropriate distribution scripts (please take a look at the table above), copy it to your system&#8217;s init.d folder (usually it&#8217;s <code class="literal">/etc/init.d/</code>):</p><pre class="programlisting">sudo cp $SCRIPT_FILE_PATH /etc/init.d/tigase</pre><p>You may also need to make it executable:</p><pre class="programlisting">sudo chmod +x /etc/init.d/tigase</pre><p>It is recommended that you open the script files or configuration files as some have some parameters that you will need to specify.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_gentoo"></a>Gentoo</h4></div></div></div><p>The conf.d script must contain the following parameters:</p><pre class="programlisting">TIGASE_HOME="/home/tigase/tigase-server"
TIGASE_USER=tigase
TIGASE_CONF="etc/tigase.conf"</pre><p>The following should be configured:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">TIGASE_HOME</code> - Specifies the Tigase Server installation directory.</li><li class="listitem"><code class="literal">TIGASE_USER</code> - Specifies the user that will run the program. This should be a user with SU permissions.</li><li class="listitem"><code class="literal">TIGASE_CONF</code> - The location of tigase.conf file, relative to the <code class="literal">TIGASE_HOME</code> directory.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_mandriva"></a>Mandriva</h4></div></div></div><p>Mandriva has a single init.d file, however it should be configured:</p><pre class="programlisting">&#8230;
export JAVA_HOME=/usr/java/jdk1.8.0
export TIGASE_DIR=/opt/tigase/server/
tigase=$TIGASE_DIR/scripts/tigase.sh
prog=tigase
config=$TIGASE_DIR/etc/tigase.conf
&#8230;</pre><p>The following should be configured:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">JAVA_HOME</code> - The location of your JDK Installation.</li><li class="listitem"><code class="literal">TIGASE_DIR</code> - Tigase Server installation directory.</li><li class="listitem"><code class="literal">tigase</code> - The location of your tigase.sh script.  This should not need adjusting if you maintain the default file structure.</li><li class="listitem"><code class="literal">config</code> - The location of your tigase.conf file. This should not need adjusting if you maintain the default file structure.</li></ul></div><p><code class="literal">pid</code> file will be stored in <code class="literal">/var/run/ser.pid</code></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_redhat"></a>Redhat</h4></div></div></div><p>Similar to Mandriva, you will need to configure the init.d file:</p><pre class="programlisting">&#8230;
JAVA_HOME=/usr/lib/jvm/java/

USERNAME=tigase
USERGROUP=tigase
NAME=tigase
DESC="Tigase XMPP server"

TIGASE_HOME=/home/tigase/tigase-server
TIGASE_LIB=${TIGASE_HOME}/jars
TIGASE_CONFIG=/etc/tigase.conf
TIGASE_OPTIONS=
TIGASE_PARAMS=

PIDFILE=
TIGASE_CONSOLE_LOG=
&#8230;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">USERNAME</code> - Username running Tigase, should have su permissions.</li><li class="listitem"><code class="literal">USERGROUP</code> - The usergroup of the username.</li><li class="listitem"><code class="literal">NAME</code> - OS name for Tigase program.</li><li class="listitem"><code class="literal">DESC</code> - Optional description.</li><li class="listitem"><code class="literal">TIGASE_HOME</code> - The location of your Tigase Server installation directory.</li><li class="listitem"><code class="literal">TIGASE_LIB</code> - The location of your Tigase Jars folder, you should not need to adjust this if you set <code class="literal">TIGASE_HOME</code> properly, and maintain the default file structure.</li><li class="listitem"><code class="literal">TIGASE_CONFIG</code> - The location of your tigase.conf file relative to <code class="literal">TIGASE_HOME</code></li><li class="listitem"><code class="literal">TIGASE_OPTIONS</code> - Legacy options for Tigase, most are now handled in init.properties or tigase.conf.</li><li class="listitem"><code class="literal">TIGASE_PARAMS</code> - Parameters passed to command line when launching Tigase.</li><li class="listitem"><code class="literal">PIDFILE</code> - Location of Tigase PID file if you wish to use custom directory.  Default will be located in /logs or /var/temp directory.</li><li class="listitem"><code class="literal">TIGASE_CONSOLE_LOG</code> - Location of Tigase Server console log file if you wish to use a custom directory.  Default will be located in /logs directory, failing that /dev/null.</li></ul></div><p>After you&#8217;ve copied the script, in order to install sysinit script you have to add it to the configuration:</p><pre class="programlisting">/sbin/chkconfig --add tigase</pre><p>Service can be enabled or disabled service with:</p><pre class="programlisting">/sbin/chkconfig tigase &lt;on|off|reset&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_debian"></a>Debian</h4></div></div></div><p>As with other distributions you should copy init.d script to the correct location. Afterwards it should be edited and correct values for variables need to be set:</p><pre class="programlisting">&#8230;
USERNAME=tigase
USERGROUP=tigase
NAME=tigase
DESC="Tigase XMPP server"

TIGASE_HOME=/usr/share/tigase
TIGASE_CONFIG=/etc/tigase/tigase.config
TIGASE_OPTIONS=
TIGASE_PARAMS=

PIDFILE=
TIGASE_CONSOLE_LOG=
&#8230;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">USERNAME</code> - Username running Tigase, should have su permissions.</li><li class="listitem"><code class="literal">USERGROUP</code> - The usergroup of the username.</li><li class="listitem"><code class="literal">NAME</code> - OS name for Tigase program.</li><li class="listitem"><code class="literal">DESC</code> - Optional description.</li><li class="listitem"><code class="literal">TIGASE_HOME</code> - The location of your Tigase Server installation directory.</li><li class="listitem"><code class="literal">TIGASE_CONFIG</code> - The location of your tigase-server.xml file relative (old configuration format)</li><li class="listitem"><code class="literal">TIGASE_OPTIONS</code> - command line arguments passed to Tigase server (which may include path to <code class="literal">init.properies</code> (if correct <code class="literal">tigase.conf</code> configuration will be found then it will translate to <code class="literal">TIGASE_OPTIONS=" --property-file etc/init.properties "</code></li><li class="listitem"><code class="literal">TIGASE_PARAMS</code> - Parameters passed to command line when launching Tigase.</li><li class="listitem"><code class="literal">PIDFILE</code> - Location of Tigase PID file if you wish to use custom directory.  Default will be located in <code class="literal">/var/run/tigase/tigase.pid</code> or under (in this case relative to tigase home directory)<code class="literal">logs/tigase.pid</code>.</li><li class="listitem"><code class="literal">TIGASE_CONSOLE_LOG</code> - Location of Tigase Server console log file if you wish to use a custom directory.  Default will be located in /logs directory, failing that /dev/null.</li></ul></div><p>Afterwards we need to install service in the system with following command:</p><pre class="programlisting">update-rc.d tigase defaults</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_running_tigase_as_a_system_service"></a>Running Tigase as a system service</h3></div></div></div><p>There are a number of benefits to running Tigase as a service, one of which is to ensure that the program will run even in the event of a power outage or accidental server restart, Tigase will always be up and running.</p><p>Once installation is complete, you should be able to start Tigase using the following command:</p><pre class="programlisting">service tigase start</pre><p>Tigase should begin running in the background.  Since Tigase is now installed as a service, it can be controlled with any of the service commands, such as:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">service tigase stop</code></li><li class="listitem"><code class="literal">service tigase restart</code></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="setupTigaseServer.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="QuickStart.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="shuttingDown.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Tigase Server Network Instructions&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Shutting Down Tigase</td></tr></table></div></body></html>