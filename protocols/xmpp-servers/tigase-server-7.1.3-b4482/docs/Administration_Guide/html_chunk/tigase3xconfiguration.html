<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Configuration Wizards</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_using_tigase_applies_to_all_tigase_server_versions.html" title="Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions"><link rel="prev" href="scriptsupport.html" title="Scripting support in Tigase"><link rel="next" href="offlineMessages.html" title="Offline Messages"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configuration Wizards</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="scriptsupport.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Using Tigase - Applies to All Tigase Server Versions</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="offlineMessages.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tigase3xconfiguration"></a>Configuration Wizards</h2></div></div></div><p>From build #247 you can use configuration generators to easily and quickly create configuration files for every complex case.</p><p>Configuring <span class="strong"><strong>Tigase</strong></span> is not too easy to understand and maintain. Even with current command line tools you still have to know what the all options are for.</p><p>To make it easier for average administrators or people who run the server for the first time or even for those who want to quickly test <span class="strong"><strong>Tigase</strong></span> server in different scenarios configuration generators have been created. For each generator you can have also a few extra options which allows you to create configuration which you don&#8217;t need to change for some time.</p><p>A few definitions first to make it easier to read the rest:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>sm</strong></span> - session manager component.</li><li class="listitem"><span class="strong"><strong>c2s</strong></span> - client connection manager component</li><li class="listitem"><span class="strong"><strong>s2s</strong></span> - server connection manager component</li><li class="listitem"><span class="strong"><strong>ext2s</strong></span> - external component connection manager</li><li class="listitem"><span class="strong"><strong>ssender</strong></span> - <a class="link" href="loadComponent.html#stanzaSender" title="StanzaSender">StanzaSender component</a></li></ol></div><p>The are 4 generators currently available:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">--gen-config-all - creating configuration file with all available components. That is: sm, c2s, s2s, ext2s, ssender.</li><li class="listitem">--gen-config-default - creating default configuration file. That is configuration which is most likely needed for basic installation. Components included in configuration are: sm, c2s, s2s.</li><li class="listitem">--gen-config-sm - creating configuration for instance with session manager and external component only. This is useful for distributed installation where you want to have session manager installed on separate machine and components managing network connections on different machines (one or more). Components included in configuration are: sm and ext2s.</li><li class="listitem">--gen-config-cs - creating configuration for instance with components managing network connections. This is useful for distributed installation where you want to have session manager installed on separate machine and components managing network connections on different machines (one or more). Components included in configuration are: c2s, s2s, ext2s.</li></ol></div><p>For each of above generators you can use additional parameters specifying other configuration details like database type you want to connect to, virtual hosts you want to support, administrator accounts and details for external component connection:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">--user-db db-type - where 'db-type' can be one of possible values: <span class="strong"><strong>mysql, pgsql, xml</strong></span></li><li class="listitem"><p class="simpara">--user-db-uri connection-uri - where 'connection-uri' is a full resource uri for user repository data source. If you skip this parameter default value is used depending on database type you selected:</p><pre class="literallayout">-- jdbc:mysql://localhost/tigase?user=root&amp;password=mypass
-- jdbc:postgresql://localhost/tigase?user=tigase
-- user-repository.xml</pre></li><li class="listitem">--auth-db db-type - where 'db-type' can be one of possible values: <span class="strong"><strong>mysql, pgsql, xml, drupal, libresource</strong></span> (If omitted 'user-db' settings are used.)</li><li class="listitem">--auth-db-uri connection-uri - where 'connection-uri' is a full resource uri for user repository data source. (If omitted 'user-db-uri' settings are used.)</li><li class="listitem"><p class="simpara">--ext-comp connection-string - possible values: connection string 'localdomain,remotedomain,port,passwd,plain/ssl,accept/connect,routing'</p><p class="simpara"><span class="strong"><strong>Note:</strong></span> It is also possible to generate configuration for many external components. To do so place --ext-comp_1 'parameters' --ext-comp_2 'parameters' and so on&#8230;&#8203;</p></li><li class="listitem">--virt-hosts virtual-hosts-list - possible values: list of virtual domains to support 'domain1,domain2'. This option causes to use virtual hosts given here instead of default/automatically detected host names.</li><li class="listitem">--admins admin-accounts-list - possible values: list of admin accounts: 'user1@domain,user2@domain2'</li><li class="listitem">--test - this parameter informs that config is generated for test instance, which means that all loggings are turned off</li><li class="listitem">--debug tigase-package - you can turn on debugs log for thwe selected tigase package. For example if you want to turn debug logs on for package: <span class="strong"><strong>tigase.server</strong></span> then you have to put parameter: --debug server. If you have any problems with your server the best way to get help from me is to generate configuration with --debug server and run the server. Then from the logs/tigase-console.log log file I can get all information I need to give you a help.</li></ul></div><p><span class="strong"><strong>Note!</strong></span> <span class="emphasis"><em>If configuration file already exists none of existing settings are overwritten. Configuration generator is activated only if config file does not exist at program startup or for config entries which are missing at startup time. So you can as well leave these settings in the file.</em></span></p><p><span class="strong"><strong>Note!</strong></span> tigase.conf <span class="emphasis"><em>property file is NOT read by the tigase server. These properties are read by the bash shell to create a proper Tigase server startup command. It will not work on MS Windows unless you run it in bash (using CygWin for example). On windows however you can use configuration wizards too by preparing proper server startup command manually. For example command for the first below presented conf file would look like (all in single line):</em></span></p><pre class="programlisting">java -Djdbc.drivers=org.postgresql.Driver
 -Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8
 -server -Xms100M -Xmx100M
 -cp "libs/pg73jdbc3.jar;jars/tigase-server.jar;libs/tigase-xmltools.jar;libs/tigase-utils.jar"
 tigase.server.XMPPServer
 -c "etc/tigase.xml"
 --gen-config-def --user-db pgsql
 --user-db-uri "jdbc:postgresql://localhost/tigase?user=tigase"</pre><p>So for example to take advantage of these options you can create tigase.conf and start Tigase server with usual command to generate ''tigase-config.xml'' configuration file:</p><pre class="programlisting">./bin/tigase.sh run tigase.conf</pre><p>A few sample files are included below for your convenience:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">tigase-def-pgsql.conf - default installation with PostgreSQL database support:</p><pre class="programlisting">ENC="-Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8"
DRV="-Djdbc.drivers=org.postgresql.Driver"
JAVA_OPTIONS="${ENC} ${DRV} -server -Xms100M -Xmx100M "

TIGASE_CONFIG="tigase-pgsql.xml"
TIGASE_OPTIONS="--gen-config-def --user-db pgsql --user-db-uri jdbc:postgresql://localhost/tigase?user=tigase "</pre><pre class="programlisting">ENC="-Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8"
DRV="-Djdbc.drivers=org.postgresql.Driver"
JAVA_OPTIONS="${ENC} ${DRV} -server -Xms100M -Xmx100M "

TIGASE_CONFIG="tigase-pgsql.xml"
TIGASE_OPTIONS="--gen-config-def --user-db pgsql "</pre></li><li class="listitem"><p class="simpara">tigase-cs.conf - installation of network connections management components (no DB is used by this instance):</p><pre class="programlisting">ENC="-Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8"
JAVA_OPTIONS="${ENC} -server -Xms100M -Xmx100M "

TIGASE_CONFIG="etc/tigase-cs.xml"
TIGASE_OPTIONS="--gen-config-cs --virt-hosts cs.tigase.org,tigase.org,sm.tigase.org \
  --ext-comp cs.tigase.org,sm.tigase.org,5678,very-secret,plain,connect"</pre></li><li class="listitem"><p class="simpara">tigase-sm-mysql.conf - installation of session manager instance and resource connection string is the same as default so we can skip '--user-db-uri' parameter:</p><pre class="programlisting">ENC="-Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8"
DRV="-Djdbc.drivers=com.mysql.jdbc.Driver"

JAVA_OPTIONS="${ENC} ${DRV} -server -Xms100M -Xmx100M "
TIGASE_CONFIG="etc/tigase-sm-mysql.xml"
TIGASE_OPTIONS="--gen-config-sm --user-db mysql --auth-db mysql --virt-hosts tigase.org,sm.tigase.org \
  --ext-comp sm.tigase.org,cs.tigase.org,5678,very-secret,plain,accept"</pre></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="scriptsupport.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_using_tigase_applies_to_all_tigase_server_versions.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="offlineMessages.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Scripting support in Tigase&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Offline Messages</td></tr></table></div></body></html>