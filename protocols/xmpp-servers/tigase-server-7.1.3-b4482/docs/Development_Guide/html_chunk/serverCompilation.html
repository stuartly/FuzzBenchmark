<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;Server Compilation</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="index.html" title="Tigase Development Guide"><link rel="prev" href="apiChanges.html" title="API changes in the Tigase Server 5.x"><link rel="next" href="scv4ol.html" title="Tigase Packages Dependency Change - Server Compilation Version 4.x or Later"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Server Compilation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apiChanges.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="scv4ol.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="serverCompilation"></a>Chapter&nbsp;3.&nbsp;Server Compilation</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="serverCompilation.html#compile">Tigase XMPP Server 5.2.0 and later - Compilation and Generating Distribution Packages</a></span></dt><dd><dl><dt><span class="section"><a href="serverCompilation.html#_distribution_packages">Distribution Packages</a></span></dt><dt><span class="section"><a href="serverCompilation.html#_building_server_and_generating_packages">Building Server and Generating Packages</a></span></dt><dt><span class="section"><a href="serverCompilation.html#_running_server">Running Server</a></span></dt></dl></dd><dt><span class="section"><a href="scv4ol.html">Tigase Packages Dependency Change - Server Compilation Version 4.x or Later</a></span></dt></dl></div><p>List of documents describing how to work with sources and how to compile them.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="serverCompilation.html#compile" title="Tigase XMPP Server 5.2.0 and later - Compilation and Generating Distribution Packages">Tigase XMPP Server 5.2.0 and Later - Compilation and Generating Distribution Packages</a></li><li class="listitem"><a class="link" href="scv4ol.html" title="Tigase Packages Dependency Change - Server Compilation Version 4.x or Later">Tigase Packages Dependency Change - Server Compilation Version 4.x or Later</a></li><li class="listitem"><a class="link" href="">Server Compilation - Version 2.x and 3.x</a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="compile"></a>Tigase XMPP Server 5.2.0 and later - Compilation and Generating Distribution Packages</h2></div></div></div><p>Starting with version 5.2.0 Tigase Server package distribution generation has switched from Ant to Maven. This will allow better dependency management as well as build repeatability.</p><p>For details on Maven and it&#8217;s use, please see the <a class="link" href="">Maven Guide.</a></p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_distribution_packages"></a>Distribution Packages</h3></div></div></div><p>Starting from version 5.2.0 there will be two separate distribution archives:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>-dist</strong></span> is a minimal version containing only tigase-server, tigase-xmltools and tigase-utils</li><li class="listitem"><span class="strong"><strong>-dist-max</strong></span> is a version containing all additional tigase components (MUC, PubSub, HTTP API, OSGi support, etc.) as well as dependencies required by those components.</li></ul></div><p>They will be available as both zip and tarball.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_building_server_and_generating_packages"></a>Building Server and Generating Packages</h3></div></div></div><p>After cloning tigase-server repository:</p><pre class="programlisting">git clone https://repository.tigase.org/git/tigase-server.git
cd tigase-server</pre><p>You compile server with maven using project distribution profile (dist):</p><pre class="programlisting">mvn -Pdist -f modules/master/pom.xml clean install</pre><p>This will:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">compile server binaries</li><li class="listitem">generate javadoc documentation</li><li class="listitem">grab all latest versions of all declared dependencies and put them in jars/ directory</li><li class="listitem">create both types of distribution packages (-dist and -dist-max) and place them in pack/ directory</li></ul></div><p>In order to create installer packages you have to execute two shell scripts:</p><pre class="programlisting">./scripts/installer-prepare.sh
./scripts/installer-generate.sh</pre><p>However, in order for them to succeed you have to build the server first using maven as described earlier. You should also have git, python2, docutils and LaTeX distributions installed (please see src/main/izpack/README.txt for details).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_running_server"></a>Running Server</h3></div></div></div><p>Afterwards you can run the server with the regular shell script:</p><pre class="programlisting">./scripts/tigase.sh start etc/tigase.conf</pre><p>Please bear in mind, that you need to provide correct setup in etc/init.properties configuration files for the server to work correctly.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apiChanges.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="scv4ol.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">API changes in the Tigase Server 5.x&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Tigase Packages Dependency Change - Server Compilation Version 4.x or Later</td></tr></table></div></body></html>