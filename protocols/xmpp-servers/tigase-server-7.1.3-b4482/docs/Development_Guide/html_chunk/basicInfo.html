<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;1.&nbsp;Basic Information</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="index.html" title="Tigase Development Guide"><link rel="prev" href="index.html" title="Tigase Development Guide"><link rel="next" href="_connector.html" title="Connector"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;1.&nbsp;Basic Information</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_connector.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="basicInfo"></a>Chapter&nbsp;1.&nbsp;Basic Information</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="basicInfo.html#_tigase_server_elements">Tigase Server Elements</a></span></dt><dd><dl><dt><span class="section"><a href="basicInfo.html#_components">Components</a></span></dt><dt><span class="section"><a href="basicInfo.html#_plug_ins">Plug-ins</a></span></dt></dl></dd><dt><span class="section"><a href="_connector.html">Connector</a></span></dt><dd><dl><dt><span class="section"><a href="_connector.html#_data_stanzas_packets_data_flow_and_processing">Data, Stanzas, Packets - Data Flow and Processing</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_tigase_server_elements"></a>Tigase Server Elements</h2></div></div></div><p>To make it easier to get into the code below are defined basic terms in the Tigase server world and there is a brief explanation how the server is designed and implemented. This document also points you to basic interfaces and implementations which can be used as example code reference.</p><p>Logically all server code can be divided into 3 kinds of modules: <span class="strong"><strong>components</strong></span>, <span class="strong"><strong>plug-ins</strong></span> and <span class="strong"><strong>connectors</strong></span>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>Components</strong></span> are the main element of Tigase server. Components are a bigger piece of code which can have separate address, receive and send stanzas, and be configured to respond to numerous events. Sample components implemented for Tigase server are: <span class="emphasis"><em>c2s connection manager</em></span>, <span class="emphasis"><em>s2s connection manager</em></span>, <span class="emphasis"><em>session manager</em></span>, <span class="emphasis"><em>XEP-0114 - external component connection manager</em></span>, <span class="emphasis"><em>MUC - multi user char rooms</em></span>.</li><li class="listitem"><span class="strong"><strong>Plug-ins</strong></span> are usually small pieces of code responsible for processing specific XMPP stanzas. They don&#8217;t have thier own address. As a result of stanza processing they can produce new XMPP stanzas. Plug-ins are loaded by <span class="emphasis"><em>session manager</em></span> component or the <span class="emphasis"><em>c2s connection manager</em></span> component. Sample plug-ins are: <span class="emphasis"><em>vCard</em></span> stanza processing, <span class="emphasis"><em>jabber:iq:register</em></span> to register new user accounts, <span class="emphasis"><em>presence</em></span> stanza processing, and <span class="emphasis"><em>jabber:iq:auth</em></span> for non-sasl authentication.</li><li class="listitem"><span class="strong"><strong>Connectors</strong></span> are modules responsible for access to data repositories like databases or LDAP to store and retrieve user data. There are 2 kinds of connectors: authentication connectors and user data connectors. Both of them are independent and can connect to different data sources. Sample connectors are: <span class="emphasis"><em>JDBC database</em></span> connector, <span class="emphasis"><em>XMLDB - embedded database</em></span> connector, <span class="emphasis"><em>Drupal database</em></span> connector, and the <span class="emphasis"><em>LibreSource database</em></span> connector.</li></ol></div><p>There is an API defined for each kind of above modules and all you have to do is enable the implementation of that specific interface. Then the module can be loaded to the server based on it&#8217;s configuration settings. There is also abstract classes available, implementing these interfaces to make development easier.</p><p>Here is a brief list of all interfaces to look at and for more details you have to refer to the guide for specific kind of module.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_components"></a>Components</h3></div></div></div><p>This is list of interfaces to look at when you work on a new component:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>tigase.server.ServerComponent</strong></span> - This is the very basic interface for component. All components must implement it.</li><li class="listitem"><span class="strong"><strong>tigase.server.MessageReceiver</strong></span> - This interface extends <code class="literal">ServerComponent</code> and is required to implement by components which want to receive data packets like <span class="emphasis"><em>session manager</em></span> and <span class="emphasis"><em>c2s connection manager</em></span>.</li><li class="listitem"><span class="strong"><strong>tigase.conf.Configurable</strong></span> - Implementing this interface is required to make it configurable. For each object of this type, configuration is pushed to it at any time at runtime. This is necessary to make it possible to change configuration at runtime. Be careful to implement this properly as it can cause issues for modules that cannot be configured.</li><li class="listitem"><span class="strong"><strong>tigase.disco.XMPPService</strong></span> - Objects using this interface can respond to "ServiceDiscovery" requests.</li><li class="listitem"><span class="strong"><strong>tigase.stats.StatisticsContainer</strong></span> - Objects using this interface can return runtime statistics. Any object can collect job statistics and implementing this interface guarantees that statistics will be presented in consisted way to user who wants to see them.</li></ol></div><p>Instead of implementing above interfaces directly I would recommend to extend one of existing abstract classes which take care of the most of "dirty and boring" stuff. Here is a list the most useful abstract classes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>tigase.server.AbstractMessageReceiver</strong></span> - Implements 4 basic interfaces:</li></ul></div><p><code class="literal">ServerComponent</code>, <code class="literal">MessageReceiver</code>, <code class="literal">Configurable</code> and <code class="literal">StatisticsContainer</code>. AbstractMessageReceiver also manages internal data queues using it&#8217;s own threads which prevents dead-locks from resource starvation. It offers even-driven data processing which means whenever packet arrives the <code class="literal">abstract void processPacket(Packet packet);</code> method is called to process it. You have to implement this abstract method in your component, if your component wants to send a packet (in response to data it received for example).</p><pre class="programlisting">boolean addOutPacket(Packet packet)</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>tigase.server.ConnectionManager</strong></span> - This is an extension of <code class="literal">AbstractMessageReceiver</code> abstract class. As the name says this class takes care of all network connection management stuff. If your component needs to send and receive data directly from the network (like c2s connection, s2s connection or external component) you should use this implementation as a basic class. It takes care of all things related to networking, I/O, reconnecting, listening on socket, connecting and so on. If you extend this class you have to expect data coming from to sources: from the <code class="literal">MessageRouter</code> and this is when the</li></ul></div><pre class="programlisting">abstract void processPacket(Packet packet);</pre><p>method is called and from network connection and then the</p><pre class="programlisting">abstract Queue processSocketData(XMPPIOService serv);</pre><p>method is called.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_plug_ins"></a>Plug-ins</h3></div></div></div><p>All Tigase plugins currently implemented are located in package: tigase.xmpp.impl. You can use this code as a sample code base. There are 3 types of plug-ins and they are defined in interfaces located in <code class="literal">tigase.xmpp</code> package:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>XMPPProcessorIfc</strong></span> - The most important and basic plug-in. This is the most common plug-in type which just processes stanzas in normal mode. It receives packets, processes them on behalf of the user and returns resulting stanzas.</li><li class="listitem"><span class="strong"><strong>XMPPPreprocessorIfc</strong></span> - This plugin performs pre-processing of the packet, intended for the pre-processors to setup for packet blocking.</li><li class="listitem"><span class="strong"><strong>XMPPPostprocessorIfc</strong></span> - This plugin performs processing of packets for which there was no specific processor.</li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_connector.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Tigase Development Guide&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Connector</td></tr></table></div></body></html>