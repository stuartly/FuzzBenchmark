<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;8.&nbsp;Experimental</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="index.html" title="Tigase Development Guide"><link rel="prev" href="_test_case_parameters_description.html" title="Test Case Parameters Description"><link rel="next" href="mobileoptimizations.html" title="Mobile Optimizations"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;8.&nbsp;Experimental</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_test_case_parameters_description.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="mobileoptimizations.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_experimental"></a>Chapter&nbsp;8.&nbsp;Experimental</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_experimental.html#dynamicRosters">Dynamic Rosters</a></span></dt><dd><dl><dt><span class="section"><a href="_experimental.html#_problem_description">Problem Description</a></span></dt><dt><span class="section"><a href="_experimental.html#_syntax_and_semantics">Syntax and Semantics</a></span></dt><dt><span class="section"><a href="_experimental.html#_retrieving_contact_data">Retrieving Contact Data</a></span></dt><dt><span class="section"><a href="_experimental.html#_updating_saving_extra_information_about_the_contact">Updating/Saving Extra Information About the Contact</a></span></dt><dt><span class="section"><a href="_experimental.html#_configuration_2">Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="mobileoptimizations.html">Mobile Optimizations</a></span></dt><dd><dl><dt><span class="section"><a href="mobileoptimizations.html#_problem_description_2">Problem Description</a></span></dt><dt><span class="section"><a href="mobileoptimizations.html#_solution">Solution</a></span></dt><dt><span class="section"><a href="mobileoptimizations.html#_queuing_algorithms">Queuing Algorithms</a></span></dt><dt><span class="section"><a href="mobileoptimizations.html#_configuration_3">Configuration</a></span></dt></dl></dd><dt><span class="section"><a href="boshsessioncache.html">Bosh Session Cache</a></span></dt><dd><dl><dt><span class="section"><a href="boshsessioncache.html#_problem_description_3">Problem Description</a></span></dt><dt><span class="section"><a href="boshsessioncache.html#_bosh_session_cache_description">Bosh Session Cache Description</a></span></dt><dt><span class="section"><a href="boshsessioncache.html#_cache_protocol">Cache Protocol</a></span></dt></dl></dd></dl></div><p>The guide contains description of non-standard or experimental functionality of the server. Some of them are based on never published extensions, some of them are just test implementation for new ideas or performance improvements.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="_experimental.html#dynamicRosters" title="Dynamic Rosters">Dynamic Rosters</a></li><li class="listitem"><a class="link" href="mobileoptimizations.html" title="Mobile Optimizations">Mobile Optimizations</a></li><li class="listitem"><a class="link" href="">Bosh Session Cache</a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dynamicRosters"></a>Dynamic Rosters</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_problem_description"></a>Problem Description</h3></div></div></div><p>Normal roster contacts stored and created as <span class="strong"><strong>dynamic roster parts</strong></span> are delivered to the end user transparently. The XMPP client doesn&#8217;t really know what contacts come from its own <span class="strong"><strong>static</strong></span> roster created manually by the user and what contacts come from a <span class="strong"><strong>dynamic</strong></span> roster part; contacts and groups generated dynamically by the server logic.</p><p>Some specialized clients need to store extra bits of information about roster contacts. For the normal user <span class="strong"><strong>static</strong></span> roster information can be stored as private data and is available only to this single user. In some cases however, clients need to store information about contacts from the dynamic roster part and this information must be available to all users accessing <span class="strong"><strong>dynamic</strong></span> roster part.</p><p>The protocol defined here allows the exchange of information, saving and retrieving extra data about the contacts.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_syntax_and_semantics"></a>Syntax and Semantics</h3></div></div></div><p>Extra contact data is accessed using IQ stanzas, specifically by means of a child element qualified by the <span class="strong"><strong>jabber:iq:roster-dynamic</strong></span> namespace. The child element MAY contain one or more children, each describing a unique contact item. Content of the element is not specified and is implementation dependent. From Tigase&#8217;s point of view it can contain any valid XML data. Whole element is passed to the DynamicRoster implementation class as is and without any verification. Upon retrieving the contact extra data the DynamicRoster implementation is supposed to provide a valid XML element with all the required data for requested <span class="strong"><strong>jid</strong></span>.</p><p>The <span class="strong"><strong>jid</strong></span> attribute specifies the Jabber Identifier (JID) that uniquely identifies the roster item. Inclusion of the <span class="strong"><strong>jid</strong></span> attribute is <span class="strong"><strong>REQUIRED</strong></span>.</p><p>Following actions on the extra contact data are allowed:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>set</strong></span> - stores extra information about the contact</li><li class="listitem"><span class="strong"><strong>get</strong></span> - retrieves extra information about the contact</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_retrieving_contact_data"></a>Retrieving Contact Data</h3></div></div></div><p>Upon connecting to the server and becoming an active resource, a client can request the extra contact data. This request can be made either before or after requesting the user roster. The client&#8217;s request for the extra contact data is <span class="strong"><strong>OPTIONAL</strong></span>.</p><p>Example: Client requests contact extra data from the server using <span class="strong"><strong>get</strong></span> request:</p><pre class="programlisting">&lt;iq type='get' id='rce_1'&gt;
&lt;query xmlns='jabber:iq:roster-dynamic'&gt;
&lt;item jid='archimedes@eureka.com'/&gt;
&lt;/query&gt;
&lt;/iq&gt;</pre><p>Example: Client receives contact extra data from the server, but there was either no extra information for the user, or the user was not found in the dynamic roster:</p><pre class="programlisting">&lt;iq type='result' id='rce_1'&gt;
&lt;query xmlns='jabber:iq:roster-dynamic'&gt;
&lt;item jid='archimedes@eureka.com'/&gt;
&lt;/query&gt;
&lt;/iq&gt;</pre><p>Example: Client receives contact extra data from the server, and there was some extra information found about the contact:</p><pre class="programlisting">&lt;iq type='result' id='rce_1'&gt;
&lt;query xmlns='jabber:iq:roster-dynamic'&gt;
&lt;item jid='archimedes@eureka.com'&gt;
&lt;phone&gt;+12 3234 322342&lt;/phone&gt;
&lt;note&gt;This is short note about the contact&lt;/note&gt;
&lt;fax&gt;+98 2343 3453453&lt;/fax&gt;
&lt;/item&gt;
&lt;/query&gt;
&lt;/iq&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_updating_saving_extra_information_about_the_contact"></a>Updating/Saving Extra Information About the Contact</h3></div></div></div><p>At any time, a client <span class="strong"><strong>MAY</strong></span> update extra contact information on the server.</p><p>Example: Client sends contact extra information using <span class="strong"><strong>set</strong></span> request.</p><pre class="programlisting">&lt;iq type='set' id='a78b4q6ha463'&gt;
&lt;query xmlns='jabber:iq:roster-dynamic'&gt;
&lt;item jid='archimedes@eureka.com'&gt;
&lt;phone&gt;+22 3344 556677&lt;/phone&gt;
&lt;note&gt;he is a smart guy, he knows whether the crown is made from pure gold or not.&lt;/note&gt;
&lt;/item&gt;
&lt;/query&gt;
&lt;/iq&gt;</pre><p>Client responds to the server:</p><pre class="programlisting">&lt;iq type='result' id='a78b4q6ha463'/&gt;</pre><p>A client <span class="strong"><strong>MAY</strong></span> update contact extra information for more than a single item in one request:</p><p>Example: Client sends contact extra information using <span class="strong"><strong>set</strong></span> request with many <code class="literal">&lt;item/&gt;</code> elements.</p><pre class="programlisting">&lt;iq type='set' id='a78b4q6ha464'&gt;
&lt;query xmlns='jabber:iq:roster-dynamic'&gt;
&lt;item jid='archimedes@eureka.com'&gt;
&lt;phone&gt;+22 3344 556677&lt;/phone&gt;
&lt;note&gt;he is a smart guy, he knows whether the crown is made from pure gold or not.&lt;/note&gt;
&lt;/item&gt;
&lt;item jid='newton@eureka.com'&gt;
&lt;phone&gt;+22 3344 556688&lt;/phone&gt;
&lt;note&gt;He knows how heavy I am.&lt;/note&gt;
&lt;/item&gt;
&lt;item jid='pascal@eureka.com'&gt;
&lt;phone&gt;+22 3344 556699&lt;/phone&gt;
&lt;note&gt;This guy helped me cure my sickness!&lt;/note&gt;
&lt;/item&gt;
&lt;/query&gt;
&lt;/iq&gt;</pre><p>Client responds to the server:</p><pre class="programlisting">&lt;iq type='result' id='a78b4q6ha464'/&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configuration_2"></a>Configuration</h3></div></div></div><p>DynamicRoster implementation class should be configured in the <span class="strong"><strong>init.properties</strong></span> file. As it&#8217;s an extension to the <span class="strong"><strong>PresenceState</strong></span>, <span class="strong"><strong>PresenceSubscription</strong></span> and <span class="strong"><strong>Roster</strong></span> plugins classes should be configured either for each plugin:</p><pre class="programlisting">sess-man/plugins-conf/jabber\:iq\:roster/dynamic-roster-classes=&lt;class list&gt;
sess-man/plugins-conf/presence-state/dynamic-roster-classes=&lt;classes list&gt;
sess-man/plugins-conf/presence-subscription/dynamic-roster-classes=&lt;classes list&gt;</pre><p>or globally:</p><pre class="programlisting">sess-man/plugins-conf/dynamic-roster-classes=&lt;classes list&gt;</pre><p><span class="strong"><strong>&lt;classes list&gt;</strong></span> is a comma separated list of classes.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_test_case_parameters_description.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="mobileoptimizations.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Test Case Parameters Description&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Mobile Optimizations</td></tr></table></div></body></html>