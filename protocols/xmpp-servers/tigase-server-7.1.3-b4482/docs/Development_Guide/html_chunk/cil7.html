<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Component Implementation - Lesson 7 - Data Repository</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="componentdevelpoment.html" title="Chapter&nbsp;4.&nbsp;Component Development"><link rel="prev" href="cil6.html" title="Component Implementation - Lesson 6 - Scripting Support"><link rel="next" href="cil8.html" title="Component Implementation - Lesson 8 - Startup Time"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Component Implementation - Lesson 7 - Data Repository</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="cil6.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;4.&nbsp;Component Development</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="cil8.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cil7"></a>Component Implementation - Lesson 7 - Data Repository</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configrepository"></a>ConfigRepository</h3></div></div></div><p>There are cases when you want to store some data permanently by your component. You can of course use the component configuration to provide some database connection settings, implement your own database connector and store records you need. There is, however, a very simple and useful framework which allows you to read and store some data transparently in either a database or a disk file. The framework also supports ad-hoc command interface straight away so you can manipulate your component data using an XMPP client.</p><p>In order to use it one needs to extend <code class="literal">tigase.db.comp.ConfigRepository</code> abstract class.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_repositoryfactory"></a>RepositoryFactory</h3></div></div></div><p>In order to have more freedom while accessing repositories it&#8217;s possible to use <code class="literal">tigase.db.RepositoryFactory</code> and any of the methods that pertain to desired type of repository one wants to access (auth, user, data):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">RepositoryFactory.getAuthRepository()</code></li><li class="listitem"><code class="literal">RepositoryFactory.getUserRepository()</code></li><li class="listitem"><code class="literal">RepositoryFactory.getDataRepository()</code></li></ul></div><p>Each method takes same set of arguments:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="emphasis"><em>class_name</em></span> - qualified name of the class that implements aforementioned repositories type</li><li class="listitem"><span class="emphasis"><em>URI</em></span> - repository URI</li><li class="listitem"><span class="emphasis"><em>params</em></span> - map containing additional configuration for the connection.</li></ul></div><p>If there is already available repository for the <code class="literal">&lt;class_name&gt;&lt;URI&gt;</code> identifier then it&#8217;s returned, otherwise new instance is created.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="cil6.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="componentdevelpoment.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="cil8.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Component Implementation - Lesson 6 - Scripting Support&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Component Implementation - Lesson 8 - Startup Time</td></tr></table></div></body></html>